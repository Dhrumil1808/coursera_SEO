"use strict";!function(e){function n(e,n,p){var h=0,f=[0],l="",m=null,l=p||"UTF8";if("UTF8"!==l&&"UTF16BE"!==l&&"UTF16LE"!==l)throw"encoding must be UTF8, UTF16BE, or UTF16LE";if("HEX"===n){if(0!==e.length%2)throw"srcString of HEX type must be in byte increments";m=o(e),h=m.binLen,f=m.value}else if("TEXT"===n||"ASCII"===n)m=t(e,l),h=m.binLen,f=m.value;else if("B64"===n)m=i(e),h=m.binLen,f=m.value;else{if("BYTES"!==n)throw"inputFormat must be HEX, TEXT, ASCII, B64, or BYTES";m=r(e),h=m.binLen,f=m.value}this.getHash=function(e,n,t,o){var r,i=null,p=f.slice(),l=h;if(3===arguments.length?"number"!=typeof t&&(o=t,t=1):2===arguments.length&&(t=1),t!==parseInt(t,10)||1>t)throw"numRounds must a integer >= 1";switch(n){case"HEX":i=a;break;case"B64":i=u;break;case"BYTES":i=s;break;default:throw"format must be HEX, B64, or BYTES"}if("SHA-1"!==e)throw"Chosen SHA variant is not supported";for(r=0;t>r;r+=1)p=d(p,l),l=160;return i(p,c(o))},this.getHMAC=function(e,n,p,m,g){var v,w,b,U,C=[],E=[];switch(v=null,m){case"HEX":m=a;break;case"B64":m=u;break;case"BYTES":m=s;break;default:throw"outputFormat must be HEX, B64, or BYTES"}if("SHA-1"!==p)throw"Chosen SHA variant is not supported";if(w=64,U=160,"HEX"===n)v=o(e),b=v.binLen,v=v.value;else if("TEXT"===n||"ASCII"===n)v=t(e,l),b=v.binLen,v=v.value;else if("B64"===n)v=i(e),b=v.binLen,v=v.value;else{if("BYTES"!==n)throw"inputFormat must be HEX, TEXT, ASCII, B64, or BYTES";v=r(e),b=v.binLen,v=v.value}if(e=8*w,n=w/4-1,b/8>w){if("SHA-1"!==p)throw"Unexpected error in HMAC implementation";for(v=d(v,b);v.length<=n;)v.push(0);v[n]&=4294967040}else if(w>b/8){for(;v.length<=n;)v.push(0);v[n]&=4294967040}for(w=0;n>=w;w+=1)C[w]=909522486^v[w],E[w]=1549556828^v[w];if("SHA-1"!==p)throw"Unexpected error in HMAC implementation";return p=d(E.concat(d(C.concat(f),e+h)),e+U),m(p,c(g))}}function t(e,n){var t,o,r,i,a=[],u=[],s=0;if("UTF8"===n)for(o=0;o<e.length;o+=1)for(t=e.charCodeAt(o),u=[],128>t?u.push(t):2048>t?(u.push(192|t>>>6),u.push(128|63&t)):55296>t||t>=57344?u.push(224|t>>>12,128|t>>>6&63,128|63&t):(o+=1,t=65536+((1023&t)<<10|1023&e.charCodeAt(o)),u.push(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)),r=0;r<u.length;r+=1){for(i=s>>>2;a.length<=i;)a.push(0);a[i]|=u[r]<<24-s%4*8,s+=1}else if("UTF16BE"===n||"UTF16LE"===n)for(o=0;o<e.length;o+=1){for(t=e.charCodeAt(o),"UTF16LE"===n&&(r=255&t,t=r<<8|t>>8),i=s>>>2;a.length<=i;)a.push(0);a[i]|=t<<16-s%4*8,s+=2}return{value:a,binLen:8*s}}function o(e){var n,t,o,r=[],i=e.length;if(0!==i%2)throw"String of HEX type must be in byte increments";for(n=0;i>n;n+=2){if(t=parseInt(e.substr(n,2),16),isNaN(t))throw"String of HEX type contains invalid characters";for(o=n>>>3;r.length<=o;)r.push(0);r[n>>>3]|=t<<24-n%8*4}return{value:r,binLen:4*i}}function r(e){var n,t,o,r=[];for(t=0;t<e.length;t+=1)n=e.charCodeAt(t),o=t>>>2,r.length<=o&&r.push(0),r[o]|=n<<24-t%4*8;return{value:r,binLen:8*e.length}}function i(e){var n,t,o,r,i,a=[],u=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw"Invalid character in base-64 string";if(t=e.indexOf("="),e=e.replace(/\=/g,""),-1!==t&&t<e.length)throw"Invalid '=' found in base-64 string";for(t=0;t<e.length;t+=4){for(i=e.substr(t,4),o=r=0;o<i.length;o+=1)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(i[o]),r|=n<<18-6*o;for(o=0;o<i.length-1;o+=1){for(n=u>>>2;a.length<=n;)a.push(0);a[n]|=(r>>>16-8*o&255)<<24-u%4*8,u+=1}}return{value:a,binLen:8*u}}function a(e,n){var t,o,r="",i=4*e.length;for(t=0;i>t;t+=1)o=e[t>>>2]>>>8*(3-t%4),r+="0123456789abcdef".charAt(o>>>4&15)+"0123456789abcdef".charAt(15&o);return n.outputUpper?r.toUpperCase():r}function u(e,n){var t,o,r,i="",a=4*e.length;for(t=0;a>t;t+=3)for(r=t+1>>>2,o=e.length<=r?0:e[r],r=t+2>>>2,r=e.length<=r?0:e[r],r=(e[t>>>2]>>>8*(3-t%4)&255)<<16|(o>>>8*(3-(t+1)%4)&255)<<8|r>>>8*(3-(t+2)%4)&255,o=0;4>o;o+=1)i=8*t+6*o<=32*e.length?i+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-o)&63):i+n.b64Pad;return i}function s(e){var n,t,o="",r=4*e.length;for(n=0;r>n;n+=1)t=e[n>>>2]>>>8*(3-n%4)&255,o+=String.fromCharCode(t);return o}function c(e){var n={outputUpper:!1,b64Pad:"="};try{e.hasOwnProperty("outputUpper")&&(n.outputUpper=e.outputUpper),e.hasOwnProperty("b64Pad")&&(n.b64Pad=e.b64Pad)}catch(t){}if("boolean"!=typeof n.outputUpper)throw"Invalid outputUpper formatting option";if("string"!=typeof n.b64Pad)throw"Invalid b64Pad formatting option";return n}function p(e,n){return e<<n|e>>>32-n}function h(e,n){var t=(65535&e)+(65535&n);return((e>>>16)+(n>>>16)+(t>>>16)&65535)<<16|65535&t}function f(e,n,t,o,r){var i=(65535&e)+(65535&n)+(65535&t)+(65535&o)+(65535&r);return((e>>>16)+(n>>>16)+(t>>>16)+(o>>>16)+(r>>>16)+(i>>>16)&65535)<<16|65535&i}function d(e,n){var t,o,r,i,a,u,s,c,d,l=[],m=[1732584193,4023233417,2562383102,271733878,3285377520];for(t=(n+65>>>9<<4)+15;e.length<=t;)e.push(0);for(e[n>>>5]|=128<<24-n%32,e[t]=n,d=e.length,s=0;d>s;s+=16){for(t=m[0],o=m[1],r=m[2],i=m[3],a=m[4],c=0;80>c;c+=1)l[c]=16>c?e[c+s]:p(l[c-3]^l[c-8]^l[c-14]^l[c-16],1),u=20>c?f(p(t,5),o&r^~o&i,a,1518500249,l[c]):40>c?f(p(t,5),o^r^i,a,1859775393,l[c]):60>c?f(p(t,5),o&r^o&i^r&i,a,2400959708,l[c]):f(p(t,5),o^r^i,a,3395469782,l[c]),a=i,i=r,r=p(o,30),o=t,t=u;m[0]=h(t,m[0]),m[1]=h(o,m[1]),m[2]=h(r,m[2]),m[3]=h(i,m[3]),m[4]=h(a,m[4])}return m}"function"==typeof define&&define.amd?define(function(){return n}):"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=exports=n:exports=n:e.jsSHA=n}(this);var minion=function(e,n){var t,o,r,i,a,u,s,c,p,h,f,d,l,m,g;if(h=document.location.hostname.split("."),h=h.slice(h.length-2).join("."),"positionly.in"===h)var v="https://minion.positionly.in";else var v="https://minion.positionly.io";var w=function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},b=function(e,n,t,o,r,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var a="";return t&&(a="; expires="+new Date(1e3*d+24*t*60*60*1e3).toUTCString()),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(n)+a+(r?"; domain="+r:"")+(o?"; path="+o:"")+(i?"; secure":""),!0};return r=new Date,f=r.getTimezoneOffset(),d=Math.round(r/1e3),l=navigator.userAgent,s=window.navigator.userLanguage||window.navigator.language,void 0!==window.innerWidth&&void 0!==window.innerHeight?(g=window.innerWidth,m=window.innerHeight):(g=document.documentElement.clientWidth,m=document.documentElement.clientHeight),i=navigator.msDoNotTrack?navigator.msDoNotTrack:navigator.doNotTrack,t=w("muid"),t||(p=new jsSHA(d+l,"TEXT"),t=p.getHash("SHA-1","HEX"),b("muid",t,365,"/","."+h)),o=w("msid"),o||(o=d,b("msid",o,.0208,"/","."+h)),c="uuid="+encodeURIComponent(t)+"&suid="+encodeURIComponent(o)+"&source="+encodeURIComponent(e)+"&user_agent="+encodeURIComponent(l)+"&user_language="+encodeURIComponent(s)+"&user_screen="+encodeURIComponent(screen.width+"x"+screen.height)+"&user_action="+encodeURIComponent(window.location.pathname)+"&user_params="+encodeURIComponent(window.location.search.slice(1))+"&referer="+encodeURIComponent(document.referrer)+"&user_viewport="+encodeURIComponent(g+"x"+m)+"&user_color_depth="+encodeURIComponent(screen.colorDepth)+"&user_timezone="+encodeURIComponent(f)+"&page_title="+encodeURIComponent(document.title)+"&page_encoding="+encodeURIComponent(document.characterSet)+"&user_dnt="+encodeURIComponent(i)+"&token="+encodeURIComponent(n),u=v+"/v1/event?"+c,a=new Image(1,1),a.src=u,!0};
