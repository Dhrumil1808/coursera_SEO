!function(e,t){sumo.define("plugins/css",[],function(){if("undefined"==typeof window)return{load:function(e,t,r){r()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,r=!1,i=!0;t[1]||t[7]?r=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?i=!1:t[4]&&(r=parseInt(t[4])<18);var n={};n.pluginBuilder="./css-builder";var s,a=function(){s=document.createElement("style"),e.appendChild(s)},o=function(e,t){a();var r=s.styleSheet||s.sheet;if(r&&r.addImport)r.addImport(e),s.onload=t;else{s.textContent='@import "'+e+'";';var i=setInterval(function(){try{s.sheet.cssRules,clearInterval(i),t()}catch(e){}},10)}},l=function(t,r){var n=document.createElement("link");if(n.type="text/css",n.rel="stylesheet",i)n.onload=function(){n.onload=function(){},setTimeout(r,7)};else var s=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==n.href)return clearInterval(s),r()}},10);n.href=t,e.appendChild(n)};return n.normalize=function(e,t){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)},n.load=function(e,t,i,n){(r?o:l)(t.toUrl(e+".css"),i)},n}),function(){var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],t=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,r=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,i="undefined"!=typeof location&&location.href,n=i&&location.protocol&&location.protocol.replace(/\:/,""),s=i&&location.hostname,a=i&&(location.port||void 0),o=[];sumo.define("plugins/text",[],function(){var l,h,u;return"undefined"!=typeof window&&window.navigator&&window.document?h=function(e,t){var r=l.createXhr();r.open("GET",e,!0),r.onreadystatechange=function(){4===r.readyState&&t(r.responseText)},r.send(null)}:"undefined"!=typeof process&&process.versions&&process.versions.node?(u=require.nodeRequire("fs"),h=function(e,t){t(u.readFileSync(e,"utf8"))}):"undefined"!=typeof Packages&&(h=function(e,t){var r=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),"utf-8")),n,s,a="";try{for(n=new java.lang.StringBuffer,(s=r.readLine())&&s.length()&&65279===s.charAt(0)&&(s=s.substring(1)),n.append(s);null!==(s=r.readLine());)n.append(i),n.append(s);a=String(n.toString())}finally{r.close()}t(a)}),l={version:"1.0.2",strip:function(e){if(e){var e=e.replace(t,""),i=e.match(r);i&&(e=i[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var t,r,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(r=0;3>r;r++){i=e[r];try{t=new ActiveXObject(i)}catch(n){}if(t){e=[i];break}}if(!t)throw Error("createXhr(): XMLHttpRequest not available");return t},get:h,parseName:function(e){var t=!1,r=e.indexOf("."),i=e.substring(0,r),e=e.substring(r+1,e.length),r=e.indexOf("!");return-1!==r&&(t=e.substring(r+1,e.length),t="strip"===t,e=e.substring(0,r)),{moduleName:i,ext:e,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,r,i){var n=l.xdRegExp.exec(e),s;return n?(e=n[2],n=n[3],n=n.split(":"),s=n[1],n=n[0],!(e&&e!==t||n&&n!==r||(s||n)&&s!==i)):!0},finishLoad:function(e,t,r,i,n){r=t?l.strip(r):r,n.isBuild&&(o[e]=r),i(r)},load:function(e,t,r,o){if(o.isBuild&&!o.inlineText)r();else{var h=l.parseName(e),u=h.moduleName+"."+h.ext,c=t.toUrl(u),p=o&&o.text&&o.text.useXhr||l.useXhr;!i||p(c,n,s,a)?l.get(c,function(t){l.finishLoad(e,h.strip,t,r,o)}):t([u],function(e){l.finishLoad(h.moduleName+"."+h.ext,h.strip,e,r,o)})}},write:function(e,t,r){if(t in o){var i=l.jsEscape(o[t]);r.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,t,r,i,n){var t=l.parseName(t),s=t.moduleName+"."+t.ext,a=r.toUrl(t.moduleName+"."+t.ext)+".js";l.load(s,r,function(){var t=function(e){return i(a,e)};t.asModule=function(e,t){return i.asModule(e,a,t)},l.write(e,s,t,n)},n)}}})}(),sumo.define("plugins/text!331c6750-848e-4469-b1bb-bfbb4fa4cd99/templates/highlighter.html",[],function(){return'<div id="sumo_twilighter_div" class="sumo_highlighter_desktop" style="display:none">\n  <textarea id="sumo_twilighter_input" class="sumo_twilighter_textarea"></textarea>\n  <div class="sumo_twilighter_admin_highlight" style="display:none;">\n    <a href="javascript:void(0);">Save Highlight</a>\n  </div>\n  <div class="sumo_twilighter_admin" style="display:none;">\n    <a href="javascript:void(0);">Delete Highlight</a>\n  </div>\n  <br>\n  <div class="sumo_twilighter_tweet">\n    <a id="sumo_twilighter_btn" href="javascript:void(0);" alt ="Tweet this">\n      <img class="btn-icon">\n      <span class="btn-text">Tweet</span>\n    </a>\n  </div>\n  <div class="sumo_twilighter_fb">\n    <a id="sumo_twilighter_btn_fb" href="javascript:void(0);" alt="Facebook Share This">\n      <img class="btn-icon">\n      <span class="btn-text">Share</span>\n    </a>\n  </div>\n  <div class="sumo_twilighter_remaining"></div>\n</div>\n'}),sumo.define("plugins/text!331c6750-848e-4469-b1bb-bfbb4fa4cd99/templates/highlighter_mobile.html",[],function(){return'<div id="sumo_twilighter_div" class="sumo_highlighter_mobile" style="display:none">\n  <div class="sumo_highlighter_m_right">\n    <div class="sumo_twilighter_m_tweet">\n      <a id="sumo_twilighter_btn" href="javascript:void(0);" alt="Tweet this">\n        <i class="btn-icon"></i>\n      </a>\n    </div>\n    <div class="sumo_twilighter_m_fb">\n      <a id="sumo_twilighter_btn_fb" href="javascript:void(0);" alt="Facebook Share This">\n        <i class="btn-icon"></i>\n      </a>\n    </div>\n  </div>\n  <div class="sumo_twilighter_m_input_div">\n    <input id="sumo_twilighter_input" type="text" class="sumo_twilighter_m_input" />\n  </div>\n</div>\n'}),sumo.define("twitter-text",[],function(){function e(e,t){return e.replace(/#\{(\w+)\}/g,function(e,r){return t[r]||""})}function t(e,t){return t=t||"","string"!=typeof e&&(e.global&&t.indexOf("g")<0&&(t+="g"),e.ignoreCase&&t.indexOf("i")<0&&(t+="i"),e.multiline&&t.indexOf("m")<0&&(t+="m"),e=e.source),new RegExp(e.replace(/#\{(\w+)\}/g,function(e,t){var i=r.txt.regexen[t]||"";return"string"!=typeof i&&(i=i.source),i}),t)}var r={txt:{regexen:{}}};return r.txt.regexen.validUrlPrecedingChars=t(/(?:[^A-Za-z0-9@＠$#＃#{invalid_chars_group}]|^)/),r.txt.regexen.invalidUrlWithoutProtocolPrecedingChars=/[-_.\/]$/,r.txt.regexen.invalidDomainChars=e("#{punct}#{spaces_group}#{invalid_chars_group}",r.txt.regexen),r.txt.regexen.validDomainChars=t(/[^#{invalidDomainChars}]/),r.txt.regexen.validSubdomain=t(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/),r.txt.regexen.validDomainName=t(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/),r.txt.regexen.validGTLD=t(RegExp("(?:(?:academy|accountants|active|actor|aero|agency|airforce|archi|army|arpa|asia|associates|attorney|audio|autos|axa|bar|bargains|bayern|beer|berlin|best|bid|bike|bio|biz|black|blackfriday|blue|bmw|boutique|brussels|build|builders|buzz|bzh|cab|camera|camp|cancerresearch|capetown|capital|cards|care|career|careers|cash|cat|catering|center|ceo|cheap|christmas|church|citic|claims|cleaning|clinic|clothing|club|codes|coffee|college|cologne|com|community|company|computer|condos|construction|consulting|contractors|cooking|cool|coop|country|credit|creditcard|cruises|cuisinella|dance|dating|degree|democrat|dental|dentist|desi|diamonds|digital|direct|directory|discount|dnp|domains|durban|edu|education|email|engineer|engineering|enterprises|equipment|estate|eus|events|exchange|expert|exposed|fail|farm|feedback|finance|financial|fish|fishing|fitness|flights|florist|foo|foundation|frogans|fund|furniture|futbol|gal|gallery|gift|gives|glass|global|globo|gmo|gop|gov|graphics|gratis|green|gripe|guide|guitars|guru|hamburg|haus|hiphop|hiv|holdings|holiday|homes|horse|host|house|immobilien|industries|info|ink|institute|insure|int|international|investments|jetzt|jobs|joburg|juegos|kaufen|kim|kitchen|kiwi|koeln|kred|land|lawyer|lease|lgbt|life|lighting|limited|limo|link|loans|london|lotto|luxe|luxury|maison|management|mango|market|marketing|media|meet|menu|miami|mil|mini|mobi|moda|moe|monash|mortgage|moscow|motorcycles|museum|nagoya|name|navy|net|neustar|nhk|ninja|nyc|okinawa|onl|org|organic|ovh|paris|partners|parts|photo|photography|photos|physio|pics|pictures|pink|place|plumbing|post|press|pro|productions|properties|pub|qpon|quebec|recipes|red|rehab|reise|reisen|ren|rentals|repair|report|republican|rest|reviews|rich|rio|rocks|rodeo|ruhr|ryukyu|saarland|schmidt|schule|scot|services|sexy|shiksha|shoes|singles|social|software|sohu|solar|solutions|soy|space|spiegel|supplies|supply|support|surf|surgery|suzuki|systems|tattoo|tax|technology|tel|tienda|tips|tirol|today|tokyo|tools|town|toys|trade|training|travel|university|uno|vacations|vegas|ventures|versicherung|vet|viajes|villas|vision|vlaanderen|vodka|vote|voting|voto|voyage|wang|watch|webcam|website|wed|wien|wiki|works|wtc|wtf|xxx|xyz|yachts|yokohama|zone|дети|москва|онлайн|орг|сайт|بازار|شبكة|موقع|संगठन|みんな|世界|中信|中文网|公司|公益|商城|商标|在线|我爱你|政务|机构|游戏|移动|组织机构|网址|网络|集团|삼성)(?=[^0-9a-zA-Z@]|$))")),r.txt.regexen.validCCTLD=t(RegExp("(?:(?:ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bl|bm|bn|bo|bq|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mf|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw|мкд|мон|рф|срб|укр|қаз|الاردن|الجزائر|السعودية|المغرب|امارات|ایران|بھارت|تونس|سودان|سورية|عمان|فلسطين|قطر|مصر|مليسيا|پاکستان|भारत|বাংলা|ভারত|ਭਾਰਤ|ભારત|இந்தியா|இலங்கை|சிங்கப்பூர்|భారత్|ලංකා|ไทย|გე|中国|中國|台湾|台灣|新加坡|香港|한국)(?=[^0-9a-zA-Z@]|$))")),r.txt.regexen.validPunycode=t(/(?:xn--[0-9a-z]+)/),r.txt.regexen.validDomain=t(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/),r.txt.regexen.validAsciiDomain=t(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi),r.txt.regexen.invalidShortDomain=t(/^#{validDomainName}#{validCCTLD}$/),r.txt.regexen.validPortNumber=t(/[0-9]+/),r.txt.regexen.validGeneralUrlPathChars=t(/[a-z0-9!\*';:=\+,\.\$\/%#\[\]\-_~@|&#{latinAccentChars}]/i),r.txt.regexen.validUrlBalancedParens=t("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)","i"),r.txt.regexen.validUrlPathEndingChars=t(/[\+\-a-z0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i),r.txt.regexen.validUrlPath=t("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))","i"),r.txt.regexen.validUrlQueryChars=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,r.txt.regexen.validUrlQueryEndingChars=/[a-z0-9_&=#\/]/i,r.txt.regexen.extractUrl=t("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))","gi"),r.txt.extractUrlsWithIndices=function(e,t){if(t||(t={extractUrlsWithoutProtocol:!0}),!e||(t.extractUrlsWithoutProtocol?!e.match(/\./):!e.match(/:/)))return[];for(var i=[];r.txt.regexen.extractUrl.exec(e);){var n=RegExp.$2,s=RegExp.$3,a=RegExp.$4,o=RegExp.$5,l=RegExp.$7,h=r.txt.regexen.extractUrl.lastIndex,u=h-s.length;if(a)s.match(r.txt.regexen.validTcoUrl)&&(s=RegExp.lastMatch,h=u+s.length),i.push({url:s,indices:[u,h]});else{if(!t.extractUrlsWithoutProtocol||n.match(r.txt.regexen.invalidUrlWithoutProtocolPrecedingChars))continue;var c=null,p=0;if(o.replace(r.txt.regexen.validAsciiDomain,function(e){var t=o.indexOf(e,p);p=t+e.length,c={url:e,indices:[u+t,u+p]},(l||e.match(r.txt.regexen.validSpecialShortDomain)||!e.match(r.txt.regexen.invalidShortDomain))&&i.push(c)}),null==c)continue;l&&(c.url=s.replace(o,c.url),c.indices[1]=h)}}return i},r}),sumo.define("jquery.style",["jquery"],function(e){if(!e.fn.style){var t=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},r=!!CSSStyleDeclaration.prototype.getPropertyValue;r||(CSSStyleDeclaration.prototype.getPropertyValue=function(e){return this.getAttribute(e)},CSSStyleDeclaration.prototype.setProperty=function(e,r,i){this.setAttribute(e,r);var i="undefined"!=typeof i?i:"";if(""!=i){var n=new RegExp(t(e)+"\\s*:\\s*"+t(r)+"(\\s*;)?","gmi");this.cssText=this.cssText.replace(n,e+": "+r+" !"+i+";")}},CSSStyleDeclaration.prototype.removeProperty=function(e){return this.removeAttribute(e)},CSSStyleDeclaration.prototype.getPropertyPriority=function(e){var r=new RegExp(t(e)+"\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?","gmi");return r.test(this.cssText)?"important":""}),e.fn.style=function(e,t,r){var i=this.get(0);if("undefined"==typeof i)return this;var n=this.get(0).style;return"undefined"!=typeof e?"undefined"!=typeof t?(r="important"==r?r:"","important"!=r&&"important"==n.getPropertyPriority(e)&&n.removeProperty(e),n.setProperty(e,t,r),this):n.getPropertyValue(e):n}}}),sumo.define("punycode",function(){}),sumo.define("IPv6",function(){}),sumo.define("SecondLevelDomains",function(){}),function(r,i){"object"==typeof e?t.exports=i(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof sumo.define&&sumo.define.amd?sumo.define("URI",["./punycode","./IPv6","./SecondLevelDomains"],i):r.URI=i(r.punycode,r.IPv6,r.SecondLevelDomains,r)}(this,function(e,t,r,i){"use strict";function n(e,t){return this instanceof n?(void 0===e&&(e="undefined"!=typeof location?location.href+"":""),this.href(e),void 0!==t?this.absoluteTo(t):this):new n(e,t)}function s(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function a(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function o(e){return"Array"===a(e)}function l(e,t){var r={},i,n;if(o(t))for(i=0,n=t.length;n>i;i++)r[t[i]]=!0;else r[t]=!0;for(i=0,n=e.length;n>i;i++)void 0!==r[e[i]]&&(e.splice(i,1),n--,i--);return e}function h(e,t){var r,i;if(o(t)){for(r=0,i=t.length;i>r;r++)if(!h(e,t[r]))return!1;return!0}var n=a(t);for(r=0,i=e.length;i>r;r++)if("RegExp"===n){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function u(e,t){if(!o(e)||!o(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0,i=e.length;i>r;r++)if(e[r]!==t[r])return!1;return!0}function c(e){return escape(e)}function p(e){return encodeURIComponent(e).replace(/[!'()*]/g,c).replace(/\*/g,"%2A")}var d=i&&i.URI;n.version="1.12.0";var g=n.prototype,f=Object.prototype.hasOwnProperty;n._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:n.duplicateQueryParameters,escapeQuerySpace:n.escapeQuerySpace}},n.duplicateQueryParameters=!1,n.escapeQuerySpace=!0,n.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,n.idn_expression=/[^a-z0-9\.-]/i,n.punycode_expression=/(xn--)/i,n.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,n.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,n.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},n.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},n.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,n.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"},n.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return n.domAttributes[t]}},n.encode=p,n.decode=decodeURIComponent,n.iso8859=function(){n.encode=escape,n.decode=unescape},n.unicode=function(){n.encode=p,n.decode=decodeURIComponent},n.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},n.encodeQuery=function(e,t){var r=n.encode(e+"");return t?r.replace(/%20/g,"+"):r},n.decodeQuery=function(e,t){e+="";try{return n.decode(t?e.replace(/\+/g,"%20"):e)}catch(r){return e}},n.recodePath=function(e){for(var t=(e+"").split("/"),r=0,i=t.length;i>r;r++)t[r]=n.encodePathSegment(n.decode(t[r]));return t.join("/")},n.decodePath=function(e){for(var t=(e+"").split("/"),r=0,i=t.length;i>r;r++)t[r]=n.decodePathSegment(t[r]);return t.join("/")};var m={encode:"encode",decode:"decode"},v,_=function(e,t){return function(r){return n[t](r+"").replace(n.characters[e][t].expression,function(r){return n.characters[e][t].map[r]})}};for(v in m)n[v+"PathSegment"]=_("pathname",m[v]);n.encodeReserved=_("reserved","encode"),n.parse=function(e,t){var r;return t||(t={}),r=e.indexOf("#"),r>-1&&(t.fragment=e.substring(r+1)||null,e=e.substring(0,r)),r=e.indexOf("?"),r>-1&&(t.query=e.substring(r+1)||null,e=e.substring(0,r)),"//"===e.substring(0,2)?(t.protocol=null,e=e.substring(2),e=n.parseAuthority(e,t)):(r=e.indexOf(":"),r>-1&&(t.protocol=e.substring(0,r)||null,t.protocol&&!t.protocol.match(n.protocol_expression)?t.protocol=void 0:"file"===t.protocol?e=e.substring(r+3):"//"===e.substring(r+1,r+3)?(e=e.substring(r+3),e=n.parseAuthority(e,t)):(e=e.substring(r+1),t.urn=!0))),t.path=e,t},n.parseHost=function(e,t){var r=e.indexOf("/"),i,n;return-1===r&&(r=e.length),"["===e.charAt(0)?(i=e.indexOf("]"),t.hostname=e.substring(1,i)||null,t.port=e.substring(i+2,r)||null):e.indexOf(":")!==e.lastIndexOf(":")?(t.hostname=e.substring(0,r)||null,t.port=null):(n=e.substring(0,r).split(":"),t.hostname=n[0]||null,t.port=n[1]||null),t.hostname&&"/"!==e.substring(r).charAt(0)&&(r++,e="/"+e),e.substring(r)||"/"},n.parseAuthority=function(e,t){return e=n.parseUserinfo(e,t),n.parseHost(e,t)},n.parseUserinfo=function(e,t){var r=e.indexOf("/"),i=r>-1?e.lastIndexOf("@",r):e.indexOf("@"),s;return i>-1&&(-1===r||r>i)?(s=e.substring(0,i).split(":"),t.username=s[0]?n.decode(s[0]):null,s.shift(),t.password=s[0]?n.decode(s.join(":")):null,e=e.substring(i+1)):(t.username=null,t.password=null),e},n.parseQuery=function(e,t){if(!e)return{};if(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!e)return{};for(var r={},i=e.split("&"),s=i.length,a,o,l,h=0;s>h;h++)a=i[h].split("="),o=n.decodeQuery(a.shift(),t),l=a.length?n.decodeQuery(a.join("="),t):null,r[o]?("string"==typeof r[o]&&(r[o]=[r[o]]),r[o].push(l)):r[o]=l;return r},n.build=function(e){var t="";return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//"),t+=n.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&"string"==typeof e.hostname&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},n.buildHost=function(e){var t="";return e.hostname?(n.ip6_expression.test(e.hostname)?t+=e.port?"["+e.hostname+"]:"+e.port:e.hostname:(t+=e.hostname,e.port&&(t+=":"+e.port)),t):""},n.buildAuthority=function(e){return n.buildUserinfo(e)+n.buildHost(e)},n.buildUserinfo=function(e){var t="";return e.username&&(t+=n.encode(e.username),e.password&&(t+=":"+n.encode(e.password)),t+="@"),t},n.buildQuery=function(e,t,r){var i="",s,a,l,h;for(a in e)if(f.call(e,a)&&a)if(o(e[a]))for(s={},l=0,h=e[a].length;h>l;l++)void 0!==e[a][l]&&void 0===s[e[a][l]+""]&&(i+="&"+n.buildQueryParameter(a,e[a][l],r),t!==!0&&(s[e[a][l]+""]=!0));else void 0!==e[a]&&(i+="&"+n.buildQueryParameter(a,e[a],r));return i.substring(1)},n.buildQueryParameter=function(e,t,r){return n.encodeQuery(e,r)+(null!==t?"="+n.encodeQuery(t,r):"")},n.addQuery=function(e,t,r){if("object"==typeof t)for(var i in t)f.call(t,i)&&n.addQuery(e,i,t[i]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=r);"string"==typeof e[t]&&(e[t]=[e[t]]),o(r)||(r=[r]),e[t]=e[t].concat(r)}},n.removeQuery=function(e,t,r){var i,s,a;if(o(t))for(i=0,s=t.length;s>i;i++)e[t[i]]=void 0;else if("object"==typeof t)for(a in t)f.call(t,a)&&n.removeQuery(e,a,t[a]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==r?e[t]===r?e[t]=void 0:o(e[t])&&(e[t]=l(e[t],r)):e[t]=void 0}},n.hasQuery=function(e,t,r,i){if("object"==typeof t){for(var s in t)if(f.call(t,s)&&!n.hasQuery(e,s,t[s]))return!1;return!0}if("string"!=typeof t)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(a(r)){case"Undefined":return t in e;case"Boolean":var l=Boolean(o(e[t])?e[t].length:e[t]);return r===l;case"Function":return!!r(e[t],t,e);case"Array":if(!o(e[t]))return!1;var c=i?h:u;return c(e[t],r);case"RegExp":return o(e[t])?i?h(e[t],r):!1:Boolean(e[t]&&e[t].match(r));case"Number":r=String(r);case"String":return o(e[t])?i?h(e[t],r):!1:e[t]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},n.commonPath=function(e,t){var r=Math.min(e.length,t.length),i;for(i=0;r>i;i++)if(e.charAt(i)!==t.charAt(i)){i--;break}return 1>i?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":(("/"!==e.charAt(i)||"/"!==t.charAt(i))&&(i=e.substring(0,i).lastIndexOf("/")),e.substring(0,i+1))},n.withinString=function(e,t,r){r||(r={});var i=r.start||n.findUri.start,s=r.end||n.findUri.end,a=r.trim||n.findUri.trim,o=/[a-z0-9-]=["']?$/i;for(i.lastIndex=0;;){var l=i.exec(e);if(!l)break;var h=l.index;if(r.ignoreHtml){var u=e.slice(Math.max(h-3,0),h);if(u&&o.test(u))continue}var c=h+e.slice(h).search(s),p=e.slice(h,c).replace(a,"");if(!r.ignore||!r.ignore.test(p)){c=h+p.length;var d=t(p,h,c,e);e=e.slice(0,h)+d+e.slice(c),i.lastIndex=h+d.length}}return i.lastIndex=0,e},n.ensureValidHostname=function(t){if(t.match(n.invalid_hostname_characters)){if(!e)throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(e.toASCII(t).match(n.invalid_hostname_characters))throw new TypeError("Hostname '"+t+"' contains characters other than [A-Z0-9.-]")}},n.noConflict=function(e){if(e){var r={URI:this.noConflict()};return URITemplate&&"function"==typeof URITemplate.noConflict&&(r.URITemplate=URITemplate.noConflict()),t&&"function"==typeof t.noConflict&&(r.IPv6=t.noConflict()),SecondLevelDomains&&"function"==typeof SecondLevelDomains.noConflict&&(r.SecondLevelDomains=SecondLevelDomains.noConflict()),r}return i.URI===this&&(i.URI=d),this},g.build=function(e){return e===!0?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=n.build(this._parts),this._deferred_build=!1),this},g.clone=function(){return new n(this)},g.valueOf=g.toString=function(){return this.build(!1)._string},m={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},_=function(e){return function(t,r){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!r),this)}};for(v in m)g[v]=_(m[v]);m={query:"?",fragment:"#"},_=function(e,t){return function(r,i){return void 0===r?this._parts[e]||"":(null!==r&&(r+="",r.charAt(0)===t&&(r=r.substring(1))),this._parts[e]=r,this.build(!i),this)}};for(v in m)g[v]=_(v,m[v]);m={search:["?","query"],hash:["#","fragment"]},_=function(e,t){return function(r,i){var n=this[e](r,i);return"string"==typeof n&&n.length?t+n:n}};for(v in m)g[v]=_(m[v][1],m[v][0]);g.pathname=function(e,t){if(void 0===e||e===!0){var r=this._parts.path||(this._parts.hostname?"/":"");return e?n.decodePath(r):r}return this._parts.path=e?n.recodePath(e):"/",this.build(!t),this},g.path=g.pathname,g.href=function(e,t){var r;if(void 0===e)return this.toString();this._string="",this._parts=n._parts();var i=e instanceof n,s="object"==typeof e&&(e.hostname||e.path||e.pathname);if(e.nodeName){var a=n.getDomAttribute(e);e=e[a]||"",s=!1}if(!i&&s&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e)this._parts=n.parse(e,this._parts);else{if(!i&&!s)throw new TypeError("invalid input");var o=i?e._parts:e;for(r in o)f.call(this._parts,r)&&(this._parts[r]=o[r])}return this.build(!t),this},g.is=function(e){var t=!1,i=!1,s=!1,a=!1,o=!1,l=!1,h=!1,u=!this._parts.urn;switch(this._parts.hostname&&(u=!1,i=n.ip4_expression.test(this._parts.hostname),s=n.ip6_expression.test(this._parts.hostname),t=i||s,a=!t,o=a&&r&&r.has(this._parts.hostname),l=a&&n.idn_expression.test(this._parts.hostname),h=a&&n.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return u;case"absolute":return!u;case"domain":case"name":return a;case"sld":return o;case"ip":return t;case"ip4":case"ipv4":case"inet4":return i;case"ip6":case"ipv6":case"inet6":return s;case"idn":return l;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return h}return null};var w=g.protocol,b=g.port,y=g.hostname;g.protocol=function(e,t){if(void 0!==e&&e&&(e=e.replace(/:(\/\/)?$/,""),!e.match(n.protocol_expression)))throw new TypeError("Protocol '"+e+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return w.call(this,e,t)},g.scheme=g.protocol,g.port=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e&&(0===e&&(e=null),e&&(e+="",":"===e.charAt(0)&&(e=e.substring(1)),e.match(/[^0-9]/))))throw new TypeError("Port '"+e+"' contains characters other than [0-9]");return b.call(this,e,t)},g.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var r={};n.parseHost(e,r),e=r.hostname}return y.call(this,e,t)},g.host=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?n.buildHost(this._parts):"":(n.parseHost(e,this._parts),this.build(!t),this)},g.authority=function(e,t){return this._parts.urn?void 0===e?"":this:void 0===e?this._parts.hostname?n.buildAuthority(this._parts):"":(n.parseAuthority(e,this._parts),this.build(!t),this)},g.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.username)return"";var r=n.buildUserinfo(this._parts);return r.substring(0,r.length-1)}return"@"!==e[e.length-1]&&(e+="@"),n.parseUserinfo(e,this._parts),this.build(!t),this},g.resource=function(e,t){var r;return void 0===e?this.path()+this.search()+this.hash():(r=n.parse(e),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!t),this)},g.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var i=this._parts.hostname.length-this.domain().length,a=this._parts.hostname.substring(0,i),o=new RegExp("^"+s(a));return e&&"."!==e.charAt(e.length-1)&&(e+="."),e&&n.ensureValidHostname(e),this._parts.hostname=this._parts.hostname.replace(o,e),this.build(!t),this},g.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var i=this._parts.hostname.length-this.tld(t).length-1;return i=this._parts.hostname.lastIndexOf(".",i-1)+1,this._parts.hostname.substring(i)||""}if(!e)throw new TypeError("cannot set domain empty");if(n.ensureValidHostname(e),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var a=new RegExp(s(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},g.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var i=this._parts.hostname.lastIndexOf("."),n=this._parts.hostname.substring(i+1);return t!==!0&&r&&r.list[n.toLowerCase()]?r.get(this._parts.hostname)||n:n}var a;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(e))throw new TypeError("TLD '"+e+"' contains characters other than [A-Z0-9]");a=new RegExp(s(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");a=new RegExp(s(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(a,e)}return this.build(!t),this},g.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,i=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return e?n.decodePath(i):i}var a=this._parts.path.length-this.filename().length,o=this._parts.path.substring(0,a),l=new RegExp("^"+s(o));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=n.recodePath(e),this._parts.path=this._parts.path.replace(l,e),this.build(!t),this},g.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),i=this._parts.path.substring(r+1);return e?n.decodePathSegment(i):i}var a=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(a=!0);var o=new RegExp(s(this.filename())+"$");return e=n.recodePath(e),this._parts.path=this._parts.path.replace(o,e),a?this.normalizePath(t):this.build(!t),this},g.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||e===!0){if(!this._parts.path||"/"===this._parts.path)return"";var r=this.filename(),i=r.lastIndexOf("."),a,o;return-1===i?"":(a=r.substring(i+1),o=/^[a-z0-9%]+$/i.test(a)?a:"",e?n.decodePathSegment(o):o)}"."===e.charAt(0)&&(e=e.substring(1));var l=this.suffix(),h;if(l)h=e?new RegExp(s(l)+"$"):new RegExp(s("."+l)+"$");else{
if(!e)return this;this._parts.path+="."+n.recodePath(e)}return h&&(e=n.recodePath(e),this._parts.path=this._parts.path.replace(h,e)),this.build(!t),this},g.segment=function(e,t,r){var i=this._parts.urn?":":"/",n=this.path(),s="/"===n.substring(0,1),a=n.split(i);if(void 0!==e&&"number"!=typeof e&&(r=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error("Bad segment '"+e+"', must be 0-based integer");if(s&&a.shift(),0>e&&(e=Math.max(a.length+e,0)),void 0===t)return void 0===e?a:a[e];if(null===e||void 0===a[e])if(o(t)){a=[];for(var l=0,h=t.length;h>l;l++)(t[l].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(t[l]))}else(t||"string"==typeof t)&&(""===a[a.length-1]?a[a.length-1]=t:a.push(t));else t||"string"==typeof t&&t.length?a[e]=t:a.splice(e,1);return s&&a.unshift(""),this.path(a.join(i),r)},g.segmentCoded=function(e,t,r){var i,s,a;if("number"!=typeof e&&(r=t,t=e,e=void 0),void 0===t){if(i=this.segment(e,t,r),o(i))for(s=0,a=i.length;a>s;s++)i[s]=n.decode(i[s]);else i=void 0!==i?n.decode(i):void 0;return i}if(o(t))for(s=0,a=t.length;a>s;s++)t[s]=n.decode(t[s]);else t="string"==typeof t?n.encode(t):t;return this.segment(e,t,r)};var x=g.query;return g.query=function(e,t){if(e===!0)return n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var r=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace),i=e.call(this,r);return this._parts.query=n.buildQuery(i||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=n.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):x.call(this,e,t)},g.setQuery=function(e,t,r){var i=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("object"==typeof e)for(var s in e)f.call(e,s)&&(i[s]=e[s]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");i[e]=void 0!==t?t:null}return this._parts.query=n.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},g.addQuery=function(e,t,r){var i=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.addQuery(i,e,void 0===t?null:t),this._parts.query=n.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},g.removeQuery=function(e,t,r){var i=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.removeQuery(i,e,t),this._parts.query=n.buildQuery(i,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},g.hasQuery=function(e,t,r){var i=n.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return n.hasQuery(i,e,t,r)},g.setSearch=g.setQuery,g.addSearch=g.addQuery,g.removeSearch=g.removeQuery,g.hasSearch=g.hasQuery,g.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},g.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},g.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},g.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===n.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},g.normalizePath=function(e){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var t,r=this._parts.path,i="",s,a;for("/"!==r.charAt(0)&&(t=!0,r="/"+r),r=r.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(i=r.substring(1).match(/^(\.\.\/)+/)||"",i&&(i=i[0]));;){if(s=r.indexOf("/.."),-1===s)break;0!==s?(a=r.substring(0,s).lastIndexOf("/"),-1===a&&(a=s),r=r.substring(0,a)+r.substring(s+3)):r=r.substring(3)}return t&&this.is("relative")&&(r=i+r.substring(1)),r=n.recodePath(r),this._parts.path=r,this.build(!e),this},g.normalizePathname=g.normalizePath,g.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(n.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},g.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},g.normalizeSearch=g.normalizeQuery,g.normalizeHash=g.normalizeFragment,g.iso8859=function(){var e=n.encode,t=n.decode;return n.encode=escape,n.decode=decodeURIComponent,this.normalize(),n.encode=e,n.decode=t,this},g.unicode=function(){var e=n.encode,t=n.decode;return n.encode=p,n.decode=unescape,this.normalize(),n.encode=e,n.decode=t,this},g.readable=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t._parts.protocol&&(r+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(r+=e.toUnicode(t._parts.hostname),t._parts.port&&(r+=":"+t._parts.port)):r+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(r+="/"),r+=t.path(!0),t._parts.query){for(var i="",s=0,a=t._parts.query.split("&"),o=a.length;o>s;s++){var l=(a[s]||"").split("=");i+="&"+n.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==l[1]&&(i+="="+n.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+i.substring(1)}return r+=n.decodeQuery(t.hash(),!0)},g.absoluteTo=function(e){var t=this.clone(),r=["protocol","username","password","hostname","port"],i,s,a;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof n||(e=new n(e)),t._parts.protocol||(t._parts.protocol=e._parts.protocol),this._parts.hostname)return t;for(s=0;a=r[s];s++)t._parts[a]=e._parts[a];return t._parts.path?".."===t._parts.path.substring(-2)&&(t._parts.path+="/"):(t._parts.path=e._parts.path,t._parts.query||(t._parts.query=e._parts.query)),"/"!==t.path().charAt(0)&&(i=e.directory(),t._parts.path=(i?i+"/":"")+t._parts.path,t.normalizePath()),t.build(),t},g.relativeTo=function(e){var t=this.clone().normalize(),r,i,s,a,o;if(t._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new n(e).normalize(),r=t._parts,i=e._parts,a=t.path(),o=e.path(),"/"!==a.charAt(0))throw new Error("URI is already relative");if("/"!==o.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(r.protocol===i.protocol&&(r.protocol=null),r.username!==i.username||r.password!==i.password)return t.build();if(null!==r.protocol||null!==r.username||null!==r.password)return t.build();if(r.hostname!==i.hostname||r.port!==i.port)return t.build();if(r.hostname=null,r.port=null,a===o)return r.path="",t.build();if(s=n.commonPath(t.path(),e.path()),!s)return t.build();var l=i.path.substring(s.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return r.path=l+r.path.substring(s.length),t.build()},g.equals=function(e){var t=this.clone(),r=new n(e),i={},s={},a={},l,h,c;if(t.normalize(),r.normalize(),t.toString()===r.toString())return!0;if(l=t.query(),h=r.query(),t.query(""),r.query(""),t.toString()!==r.toString())return!1;if(l.length!==h.length)return!1;i=n.parseQuery(l,this._parts.escapeQuerySpace),s=n.parseQuery(h,this._parts.escapeQuerySpace);for(c in i)if(f.call(i,c)){if(o(i[c])){if(!u(i[c],s[c]))return!1}else if(i[c]!==s[c])return!1;a[c]=!0}for(c in s)if(f.call(s,c)&&!a[c])return!1;return!0},g.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},g.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},n}),sumo.define("jquery.article",["jquery"],function(e){e.expr[":"].emptytext=e.expr.createPseudo(function(t){return function(t){return""===e.trim(e(t).text())}}),e.fn.findIncludeSelf=function(t,r){var i;return i=":has(> p + p + p)"==t?this.find("p + p + p").parent():this.find(t),e(this).is(r)?i:i.addBack(t)},e.fn.exists=function(){return 0!==this.length},e.fn.findLeaves=function(r,i){var n=e(this),s=n.findIncludeSelf(r,"body").filter(i);return s=s.filter(t),s.filter(function(){return!e(this).find(s).exists()})},e.fn.findTrunks=function(r,i){var n=e(this),s=n.findIncludeSelf(r,"body").filter(i);return s=s.filter(t),s.filter(function(){return!e(this).parents().filter(s).exists()})};var t=function(){if(this._header||(this._header=i(e(this))),this._titleText||(this._titleText=a(this)),this._header){var t=.666*e(this).outerHeight();if(t&&this._header.outerHeight()>=t)return!1}return!0},r=function(t){var r=t||e("body").find("main, [role=main]").eq(0).get(0)||"body",i=e(),n=':not("[class^=comment],[id^=comment],[class*=footer],.sidebar:not(body) *,aside *,#sidebar *,footer *,[class*=footer]:not(body, [class*=not-footer]) *,#comments *,#livefyre-comments *,[class^=fyre] *,[class^=comment],[id^=comment] *,[class*=related-post]:not(body) *,.archive-page,.aside,.hentry-metro,.hrf-entry,:emptytext,.tve-leads-lightbox article")',s=[];s.push("article"),s.push(".post"),s.push(".entry-content"),s.push(".post-content"),s.push(".post_box"),s.push(".post-item"),s.push(".blog-post-wrapper"),s.push(".type-post"),s.push("#content"),s.push(".blog_content"),"body"!=r?(s.push(".hentry"),s.push(".content")):(s.push("main .hentry"),s.push("[role=main] .hentry"),s.push("main .content"),s.push("[role=main] .content")),s.push("#post-content"),s.push("#blog-content"),s.push(".blog-post");for(var a=[":has(> p + p + p)"],o=0;o<s.length;o++)if(i=e(r).findLeaves(s[o],n),i.length>0)return i;for(var o=0;o<a.length;o++)if(i=e(r).findTrunks(a[o],n),i.length>0)return i;var i,l,h,u;return i},i=function(t){var r=null,i=[".main-title","header",".post-header",".post-title","h1","h2","h3","h4","h5","h6",".title",".headline"],n={};try{i.forEach(function(i){if(r=e(t).find(i),r.length>0)throw n})}catch(s){if(s===n)return r.eq(0);throw s}return null},n=function(t){var r=null,i=[".fyre","footer",".post-footer",".footer",".entry-footer",'[class^="comment"]:not(.post-meta-info *, [class^=comment-count], [class^=comments-link], [class^=comments-number], li)',".fb-comments","iframe[title=Disqus]","#disqus_thread"],n={};try{i.forEach(function(i){if(r=e(t).find(i),r.length>0)throw n})}catch(s){if(s===n)return r.eq(0).hasClass("fb-comments")&&r.eq(0).prev("h3 + p").length>0?r.eq(0).prev("h3 + p").prev("h3"):r.eq(0);throw s}return null},s=function(e){return i(e)},a=function(e){var t=null;return!e._title&&e._header&&(e._title=e._header),e._title&&(t=e._title.text().trim()),t},o=function(t){var r=null,i=["a[rel=bookmark]","h1 > a","h2 > a","h3 > a","header > a"],n={};try{i.forEach(function(i){if(r=e(t).find(i).filter("[href]"),r.length>0)throw n})}catch(s){if(s===n)return r.eq(0);throw s}return null};e.articles=function(t){if("__smCache"in window&&"articles"in window.__smCache)return window.__smCache.articles;var l=r(t);return l.each(function(){this._header||(this._header=i(e(this))),this._footer=n(e(this)),this._title=this._header?s(this._header):null,this._titleText||(this._titleText=a(this));var t=this._header?o(this._header):null;t?this._anchor=t:this._anchor=o(e(this)),this._anchor?this._url=this._anchor.attr("href"):this._url=null,this._url||(this._url=window.location.href)}),"__smDebug"in window&&window.__smDebug&&l.each(function(){e(this).css("background","rgba(0,0,255,.5)"),this._header&&this._header.css("background","rgba(0,255,0,.5)"),this._title&&this._title.css("background","rgba(255,0,0,.5)"),this._footer&&this._footer.css("background","rgba(255,255,0,.5)")}),"__smCache"in window||(window.__smCache={}),window.__smCache.articles=l,setTimeout(function(){"__smCache"in window&&delete window.__smCache.articles},1e4),l},e.article=function(){return e.articles().eq(0)}}),sumo.define("jquery.displayrules",["jquery","URI","jquery.article"],function(e,t){e.isCurrentUrlAllowed=function(r,i,n,s){function a(e,t,r,i){var n=[];if(e&&e.length)for(var s=0;s<e.length;s++){var a=e[s];if("object"==typeof a&&a.hasOwnProperty(t)&&a[t]==r&&(n.push(a),i))return n[0]}return i?null:n}if(r&&r.length){var o=a(r,"filter_type","article",!0),l=[];o&&(l=e.articles()),n||(n=!1);var h=function(e){for(var t=Object.keys(e),r=t.length,i=Array(r),n=0;r>n;n++)i[n]=[t[n],e[t[n]]];return i},u=function(e){var t=h(e),r=t.length;return function(e){if(null==e)return!r;e=new Object(e);for(var i=0;r>i;i++){var n=t[i],s=n[0];if(n[1]!==e[s]||!(s in e))return!1}return!0}},c=function(e){var e=e.substr(1).split("&");if(""==e)return{};for(var t={},r=0;r<e.length;++r){var i=e[r].split("=",2);if(1==i.length)t[i[0]]="";else try{t[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))}catch(n){t[i[0]]=i[1].replace(/\+/g," ")}}return t},p=function(e,t,r){if(e.has_hash&&e.hash!=t)return!1;if(e.has_query_params){var i=c(e.search),n=c(r),s=u(i);if(s(n))return!0;if(!(["containing","beginning"].indexOf(e.filter_type)>=0))return!1;for(var a=!0,o=Object.keys(i),l=0;l<o.length;l++){var h=o[l],p=i[o[l]];if(p&&p.length)if(h in n){if(0!=n[h].indexOf(p))return!1}else{if("containing"!=e.filter_type)return!1;var d=!1;if(Object.keys(n).forEach(function(e){e.lastIndexOf(h)>=0&&h==e.substring(e.lastIndexOf(h))&&0==n[e].indexOf(p)&&(d=!0)}),!d)return!1}else{if(h in n)continue;for(var g=Object.keys(n),d=!1,f=0;f<g.length;f++){var m=g[f];if(0==m.indexOf(h)){d=!0;break}}if(!d)return!1}}}return!0},d=a(r,"parsedUserAgent",!0,!0),g=window.location.toString();g&&(g=g.toLowerCase());var f=window.location.pathname.toString();f&&(f=f.toLowerCase());var m=window.location.hostname+f;m&&(m=m.toLowerCase()),"/"==f[f.length-1]&&(f=f.substring(0,f.length-1),m=m.substring(0,m.length-1)),0==m.indexOf("www.")&&(m=m.substring(4));var v=window.location.search;v&&(v=v.toLowerCase());var _=window.location.hash;_&&(_=_.toLowerCase(),"#"!=_[0]&&(_="#"+_));for(var w=c(v),b=Math.min(window.screen.availWidth||e(window).width(),e(window).width()),y=document.cookie.split(";"),x={},T=[],C=0;C<y.length;C++){var S=y[C].substring(0,y[C].indexOf("=")).trim(),k=y[C].substring(y[C].indexOf("=")+1).trim();T.push(S),x[S]=k}var P=document.getElementsByTagName("meta"),A=document.referrer;if(A&&A.length){A=A.toLowerCase();try{var I=t(A);if(I.is("ip")){var R=I.hostname();R&&(R=R.toLowerCase())}else{var R=I.domain();R&&(R=R.toLowerCase())}var O=I.path();O&&(O=O.toLowerCase());var E=I.tld();E&&(E=E.toLowerCase());var q=I.hostname()?I.hostname().toLowerCase()+O:O;"/"==O[O.length-1]&&(O=O.substring(0,O.length-1),q=q.substring(0,q.length-1)),0==q.indexOf("www.")&&(q=q.substring(4));var L=I.search(),z=I.hash()}catch(N){A=!1}}else A=!1;var j=function(t){var r=!1;return e.each(t,function(e,t){var i=!1;return t.forEach(function(e){var t=!1;if(!i)if("article"==e.filter_type)1==l.length&&(t=!0);else if("smaller"==e.filter_type)(isNaN(parseFloat(e.filter_value))||b<parseFloat(e.filter_value))&&(t=!0);else if("bigger"==e.filter_type)(isNaN(parseFloat(e.filter_value))||b>=parseFloat(e.filter_value))&&(t=!0);else if("views_lt"==e.filter_type)(isNaN(e.pageviews)||s<e.pageviews)&&(t=!0);else if("views_eq"==e.filter_type)(isNaN(e.pageviews)||s==e.pageviews)&&(t=!0);else if("views_gt"==e.filter_type)(isNaN(e.pageviews)||s>e.pageviews)&&(t=!0);else if("countryis"==e.filter_type)n==e.filter_value.toLowerCase()&&(t=!0);else if("countryisnot"==e.filter_type)n&&n==e.filter_value.toLowerCase()||(t=!0);else if("c_exists"==e.filter_type)T.indexOf(e.filter_value)>=0&&(t=!0);else if("c_dne"==e.filter_type)T.indexOf(e.filter_value)<0&&(t=!0);else if("c_equals"==e.filter_type)T.indexOf(e.filter_value)>=0&&x[e.filter_value]==e.param_value&&(t=!0);else if("c_notequals"==e.filter_type)(T.indexOf(e.filter_value)<0||x[e.filter_value]!=e.param_value)&&(t=!0);else if("c_contains"==e.filter_type)T.indexOf(e.filter_value)>=0&&x[e.filter_value].indexOf(e.param_value)>=0&&(t=!0);else if("c_notcontains"==e.filter_type)(T.indexOf(e.filter_value)<0||x[e.filter_value].indexOf(e.param_value)<0)&&(t=!0);else if("mt_equals"===e.filter_type)for(var r=0;r<P.length;r++){var a=P[r].getAttribute(e.filter_value);a&&a.toLowerCase()===e.param_value&&(t=!0)}else if("mt_notequals"===e.filter_type){for(var o=!1,r=0;r<P.length;r++){var a=P[r].getAttribute(e.filter_value);a&&a.toLowerCase()===e.param_value&&(o=!0)}t=!o}else if("mt_contains"===e.filter_type)for(var r=0;r<P.length;r++){var a=P[r].getAttribute(e.filter_value);a&&-1!==a.toLowerCase().indexOf(e.param_value)&&(t=!0)}else if("mt_notcontains"===e.filter_type){for(var o=!1,r=0;r<P.length;r++){var a=P[r].getAttribute(e.filter_value);a&&-1!==a.toLowerCase().indexOf(e.param_value)&&(o=!0)}t=!o}else if("mt_beginning"===e.filter_type)for(var r=0;r<P.length;r++){var a=P[r].getAttribute(e.filter_value);a&&a.toLowerCase().substring(0,e.param_value.length)===e.param_value&&(t=!0)}else if("q_exists"==e.filter_type)w&&w.hasOwnProperty(e.filter_value.toLowerCase())&&(t=!0);else if("q_dne"==e.filter_type)w&&w.hasOwnProperty(e.filter_value)||(t=!0);else if("q_equals"==e.filter_type)w&&w[e.filter_value]&&w[e.filter_value]==e.param_value&&(t=!0);else if("q_notequals"==e.filter_type)w&&w[e.filter_value]&&w[e.filter_value]==e.param_value||(t=!0);else if("q_contains"==e.filter_type)w&&w[e.filter_value]&&w[e.filter_value].indexOf(e.param_value)>=0&&(t=!0);else if("q_notcontains"==e.filter_type)(!w||!w[e.filter_value]||w[e.filter_value].indexOf(e.param_value)<0)&&(t=!0);else if("exact"==e.filter_type){var h=p(e,_,v);h&&(e.full_url?m==e.match_url&&(t=!0):null==e.match_url&&h?t=!0:(m==e.match_url||f==e.match_url)&&(t=!0))}else if("beginning"==e.filter_type){var h=p(e,_,v);h&&(e.full_url?0==m.indexOf(e.match_url.toLowerCase())&&(t=!0):null==e.match_url&&h?t=!0:(0==m.indexOf(e.match_url.toLowerCase())||0==f.indexOf(e.match_url.toLowerCase()))&&(t=!0))}else if("containing"==e.filter_type){var h=p(e,_,v);h&&(e.full_url?m.indexOf(e.match_url.toLowerCase())>=0&&(t=!0):null==e.match_url&&h?t=!0:m.indexOf(e.match_url.toLowerCase())>=0&&(t=!0))}else if(A&&["r_url_exact","r_domain_exact","r_url_beginning","r_domain_beginning","r_url_containing","r_domain_containing"].indexOf(e.filter_type)>=0)if("r_url_exact"==e.filter_type){var h=p(e,z,L);e.full_url?h&&q==e.match_url.toLowerCase()&&(t=!0):h&&q==e.match_url.toLowerCase()?t=!0:null==e.match_url&&h&&(t=!0)}else if("r_domain_exact"==e.filter_type)e.host?e.host==R&&(t=!0):e.filter_value==R&&(t=!0);else if("r_url_beginning"==e.filter_type){var h=p(e,z,L);e.full_url?h&&0==q.indexOf(e.match_url)&&(t=!0):h&&0==q.indexOf(e.match_url)?t=!0:null==e.match_url&&h&&(t=!0)}else if("r_domain_beginning"==e.filter_type)e.host&&0==R.indexOf(e.host)?t=!0:0==R.indexOf(e.filter_value)&&(t=!0);else if("r_url_containing"==e.filter_type){var h=p(e,z,L);e.full_url?h&&q.indexOf(e.match_url)>=0&&(t=!0):h&&q.indexOf(e.match_url)>=0?t=!0:null==e.match_url&&h&&(t=!0)}else"r_domain_containing"==e.filter_type&&(e.host&&R.indexOf(e.host)>=0?t=!0:R.indexOf(e.filter_value)>=0&&(t=!0));else if("ua_os"==e.filter_type&&d&&d.compareOS){var u=[e.filter_value];"winmobile"==e.filter_value?u=["windows mobile","windows phone"]:"macos"==e.filter_value?u=["mac os"]:"windesktop"==e.filter_value&&(u=["windows"]),u.indexOf(d.compareOS)>=0&&(t=!0)}else if("ua_browser"==e.filter_type&&d&&d.compareBrowser){var u=[e.filter_value];"chrome"==e.filter_value?u=["chrome","chromium"]:"ie"==e.filter_value?u=["ie","ie mobile"]:"opera"==e.filter_value?u=["opera","opera mini","opera mobile","opera tablet"]:"safari"==e.filter_value&&(u=["safari","mobile safari"]),u.indexOf(d.compareBrowser)>=0&&(t=!0)}else if("ua_exact"==e.filter_type)e.filter_value.toLowerCase()==navigator.userAgent.toLowerCase()&&(t=!0);else if("ua_beginning"==e.filter_type)0==navigator.userAgent.toLowerCase().indexOf(e.filter_value.toLowerCase())&&(t=!0);else if("ua_containing"==e.filter_type)navigator.userAgent.toLowerCase().indexOf(e.filter_value.toLowerCase())>=0&&(t=!0);else if("hash_exact"==e.filter_type){var c="#"==e.filter_value[0]?e.filter_value:"#"+e.filter_value;c.toLowerCase()==_.toLowerCase()&&(t=!0)}else if("hash_beginning"==e.filter_type){var c="#"==e.filter_value[0]?e.filter_value:"#"+e.filter_value;0==_.toLowerCase().indexOf(c.toLowerCase())&&(t=!0)}else if("hash_containing"==e.filter_type){var c="#"==e.filter_value[0]?e.filter_value:"#"+e.filter_value;_.toLowerCase().indexOf(c.toLowerCase())>=0&&(t=!0)}else"all"==e.filter_type&&(t=!0);t||(i=!0)}),i?void 0:(r=!0,!1)}),r},U=a(r,"rule_type","include",!1);if(U&&U.length){var D={},Q=0;U.forEach(function(e){e.group_id&&e.group_id.length?D.hasOwnProperty(e.group_id)?D[e.group_id].push(e):D[e.group_id]=[e]:(D[Q]=[e],Q+=1)}),currentUrlIncluded=j(D)}else currentUrlIncluded=!0;if(!currentUrlIncluded)return!1;var H=a(r,"rule_type","exclude",!1),F=!1;if(!H||!H.length)return!0;var $={},Q=0;return H.forEach(function(e){e.group_id&&e.group_id.length?$.hasOwnProperty(e.group_id)?$[e.group_id].push(e):$[e.group_id]=[e]:($[Q]=[e],Q+=1)}),F=j($),F?!1:!0}return!0}}),sumo.define("selectorator",["jquery"],function(e){var t,r,i,n,s,a,o,l;return o=e.map,s=e.extend,a=e.inArray,i=function(e,t){return-1!==a(e,t)},n=function(e){return e.replace(/([\!\"\#\$\%\&'\(\)\*\+\,\.\/\:\;<\=>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1")},r=function(e,t){return o(e,function(e){return e===t?null:e})},l=function(e){return o(e,function(t,r){return parseInt(r,10)===parseInt(e.indexOf(t),10)?t:null})},t=function(){function t(t,r){this.element=t,this.options=s(s({},e.selectorator.options),r),this.cachedResults={}}return t.prototype.query=function(t){var r;return(r=this.cachedResults)[t]||(r[t]=e(t.replace(/#([^\s]+)/g,"[id='$1']")))},t.prototype.getProperTagName=function(){return this.element[0]?"span"==this.element[0].tagName.toLowerCase()&&this.getIgnore("class")&&i(this.element.attr("class"),this.getIgnore("class"))?this.hasParent()?this.element.parent()[0].tagName.toLowerCase():null:this.element[0].tagName.toLowerCase():null},t.prototype.hasParent=function(){return this.element&&0<this.element.parent().size()},t.prototype.isElement=function(){var e;return e=this.element[0],e&&e.nodeType===e.ELEMENT_NODE},t.prototype.validate=function(e,t,r,n){var s,a;if(null==r&&(r=!0),null==n&&(n=!1),a=this.query(e),r&&1<a.size()||!r&&0===a.size()){if(!t||-1!==e.indexOf(":"))return null;if(s=n?" > ":" ",e=t+s+e,a=this.query(e),r&&1<a.size()||!r&&0===a.size())return null}return i(this.element[0],a.get())?e:null},t.prototype.generate=function(){var e,t,i,n,s;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];for(t=[],s=[this.generateSimple,this.generateAncestor,this.generateRecursive],i=0,n=s.length;n>i;i++)if(e=s[i],t=l(r(e.call(this))),t&&t.length>0)return t;return l(t)},t.prototype.generateText=function(){var e,t,i,n,s;if(!(this.element&&this.hasParent()&&this.isElement()))return[""];for(t=[],s=[this.generateTextSelector],i=0,n=s.length;n>i;i++)if(e=s[i],t=l(r(e.call(this))),t&&t.length>0)return t;return l(t)},t.prototype.generateAncestor=function(){var r,i,n,s,a,o,l,h,u,c,p,d,g,f;for(a=[],f=this.element.parents(),h=0,p=f.length;p>h;h++){for(i=f[h],r=!0,l=this.generateSimple(null,!1),u=0,d=l.length;d>u;u++)for(o=l[u],s=new t(e(i),this.options).generateSimple(null,!1),c=0,g=s.length;g>c;c++)n=s[c],e.merge(a,this.generateSimple(n,!0,r));r=!1}return a},t.prototype.generateSimple=function(e,t,i){var n,s,a,l,h,u,c,p;for(a=this,l=a.getProperTagName(),h=function(r){return a.validate(r,e,t,i)},p=[[a.getIdSelector],[a.getClassSelector],[a.getIdSelector,!0],[a.getClassSelector,!0],[a.getNameSelector],[function(){return[a.getProperTagName()]}]],u=0,c=p.length;c>u;u++)if(n=p[u],s=n[0].call(a,n[1])||[],s=r(o(s,h)),s.length>0)return s;return[]},t.prototype.generateTextSelector=function(e,t,i){var n,s,a,o,l,h,u,c;for(a=this,o=a.getProperTagName(),l=function(r){return a.validate(r,e,t,i)},c=[[a.getIdSelector],[a.getTextSelector,!0],[function(){return[a.getProperTagName()]}]],h=0,u=c.length;u>h;h++)if(n=c[h],s=n[0].call(a,n[1])||[],s=r(s),s.length>0)return s;return[]},t.prototype.generateRecursive=function(){var e,r,i,n;return n=this.getProperTagName(),-1!==n.indexOf(":")&&(n="*"),r=this.element.parent(),i=new t(r).generate()[0],e=r.children(n).index(this.element),n=""+n+":eq("+e+")",""!==i&&(n=i+" > "+n),[n]},t.prototype.getIdSelector=function(e){var t;return null==e&&(e=!1),e=e?this.getProperTagName():"",t=this.element.attr("id"),"string"==typeof t&&t.trim().length&&!i(t,this.getIgnore("id"))&&0!=t.indexOf("yui")?[""+e+"#"+n(t)]:null},t.prototype.getTextSelector=function(r){var i="";if(this.hasParent()){var n=this.element.parent()[0];r=r?n.tagName.toLowerCase():"",n=e(n);var s=n.text();"string"==typeof s&&s.length>0&&(i=r+":similar("+s+")")}var a=this.element.prev();if(a.length){var o=new t(a).generateSimple(null,!1);o&&(i+=" > "+o)}return i?[i]:null},t.prototype.getClassSelector=function(e){var t,r,s;return null==e&&(e=!1),s=this.getProperTagName(),/^(body|html)$/.test(s)?null:(e=e?s:"",r=this.getIgnore("class"),t=(this.element.attr("class")||"").replace(/\{.*\}/,"").split(/\s/),o(t,function(t){return t&&!i(t,r)?""+e+"."+n(t):null}))},t.prototype.getNameSelector=function(){var e,t;return t=this.getProperTagName(),e=this.element.attr("name"),e&&!i(e,this.getIgnore("name"))?[""+t+"[name='"+e+"']"]:null},t.prototype.getIgnore=function(e){var t,r,i;return r=this.options.ignore||{},t="class"===e?"classes":""+e+"s",i=r[e]||r[t],"string"==typeof i?[i]:i},t}(),e.selectorator={options:{},unique:l,clean:r,escapeSelector:n},e.fn.selectorator=function(r){return new t(e(this),r)},e.fn.getSelector=function(e){return this.selectorator(e).generate()},e.fn.getTextSelector=function(e){return this.selectorator(e).generateText()},this}),sumo.define("range",["jquery"],function(e){var t=function(e){return e.fn.compare=function(e){try{e=e.jquery?e[0]:e}catch(t){return null}if(window.HTMLElement){var r=HTMLElement.prototype.toString.call(e);if("[xpconnect wrapped native prototype]"==r||"[object XULElement]"==r||"[object Window]"===r)return null}if(this[0].compareDocumentPosition)return this[0].compareDocumentPosition(e);if(this[0]==document&&e!=document)return 8;var i=(this[0]!==e&&this[0].contains(e)&&16)+(this[0]!=e&&e.contains(this[0])&&8),n=document.documentElement;return this[0].sourceIndex&&(i+=this[0].sourceIndex<e.sourceIndex&&4,i+=this[0].sourceIndex>e.sourceIndex&&2,i+=(this[0].ownerDocument!==e.ownerDocument||this[0]!=n&&this[0].sourceIndex<=0||e!=n&&e.sourceIndex<=0)&&1),i},e}(e),r=function(e){e.fn.range=function(){return e.Range(this[0])};var t=function(e){return e.replace(/([a-z])([a-z]+)/gi,function(e,t,r){return t+r.toLowerCase()}).replace(/_/g,"")},r=function(e){return e.replace(/^([a-z]+)_TO_([a-z]+)/i,function(e,t,r){return r+"_TO_"+t})},i=function(e){return e?e.ownerDocument.defaultView||e.ownerDocument.parentWindow:window},n=function(e,t,r){},s={};e.Range=function(t){return this.constructor!==e.Range?new e.Range(t):(t&&t.jquery&&(t=t[0]),void(!t||t.nodeType?(this.win=i(t),this.win.document.createRange?this.range=this.win.document.createRange():this.win&&this.win.document.body&&this.win.document.body.createTextRange&&(this.range=this.win.document.body.createTextRange()),t&&this.select(t)):null!=t.clientX||null!=t.pageX||null!=t.left?this.moveToPoint(t):t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches.length?this.moveToPoint(t.originalEvent.touches[0]):t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length?this.moveToPoint(t.originalEvent.changedTouches[0]):this.range=t))},e.Range.current=function(t){var r=i(t),n;return r.getSelection?(n=r.getSelection(),new e.Range(n.rangeCount?n.getRangeAt(0):r.document.createRange())):new e.Range(r.document.selection.createRange())},e.extend(e.Range.prototype,{moveToPoint:function(t){var r=t.clientX,i=t.clientY;if(!r){var n=v();r=(t.pageX||t.left||0)-n.left,i=(t.pageY||t.top||0)-n.top}if(s.moveToPoint)return this.range=e.Range().range,this.range.moveToPoint(r,i),this;for(var o=document.elementFromPoint(r,i),l=0;l<o.childNodes.length;l++){var h=o.childNodes[l];if(3===h.nodeType||4===h.nodeType)for(var u=e.Range(h),c=u.toString().length,p=1;c+1>p;p++){var d=u.end(p).rect();if(d.left<=r&&d.left+d.width>=r&&d.top<=i&&d.top+d.height>=i)return u.start(p-1),this.range=u.range,this}}var g;a(o.childNodes,function(r){var i=e.Range(r);return i.rect().top>t.clientY?!1:void(g=i)}),g?(g.start(g.toString().length),this.range=g.range):this.range=e.Range(o).range},window:function(){return this.win||window},overlaps:function(t){t.nodeType&&(t=e.Range(t).select(t));var r=this.compare("START_TO_START",t),i=this.compare("END_TO_END",t);return 0>=r&&i>=0?!0:r>=0&&this.compare("START_TO_END",t)<=0?!0:this.compare("END_TO_START",t)>=0&&0>=i?!0:!1},collapse:function(e){return this.range.collapse(void 0===e?!0:e),this},toString:function(){return"string"==typeof this.range.text?this.range.text:this.range.toString()},start:function(t){if(void 0===t){if(this.range.startContainer)return{container:this.range.startContainer,offset:this.range.startOffset};var r=this.clone().collapse().parent(),i=e.Range(r).select(r).collapse();return i.move("END_TO_START",this),{container:r,offset:i.toString().length}}if(this.range.setStart)if("number"==typeof t)this.range.setStart(this.range.startContainer,t);else if("string"==typeof t){var n=c(this.range.startContainer,this.range.startOffset,parseInt(t,10));this.range.setStart(n.node,n.offset)}else this.range.setStart(t.container,t.offset);else if("string"==typeof t)this.range.moveStart("character",parseInt(t,10));else{var s=this.start().container,a;"number"==typeof t?a=t:(s=t.container,a=t.offset);var o=e.Range(s).collapse();o.range.move(a),this.move("START_TO_START",o)}return this},end:function(t){if(void 0===t){if(this.range.startContainer)return{container:this.range.endContainer,offset:this.range.endOffset};var r=this.clone().collapse(!1).parent(),i=e.Range(r).select(r).collapse();return i.move("END_TO_END",this),{container:r,offset:i.toString().length}}if(this.range.setEnd)if("number"==typeof t)this.range.setEnd(this.range.endContainer,t);else if("string"==typeof t){var n=c(this.range.endContainer,this.range.endOffset,parseInt(t,10));this.range.setEnd(n.node,n.offset)}else this.range.setEnd(t.container,t.offset);else if("string"==typeof t)this.range.moveEnd("character",parseInt(t,10));else{var s=this.end().container,a;"number"==typeof t?a=t:(s=t.container,a=t.offset);var o=e.Range(s).collapse();o.range.move(a),this.move("END_TO_START",o)}return this},parent:function(){if(this.range.commonAncestorContainer)return this.range.commonAncestorContainer;var t=this.range.parentElement(),r=this.range;return a(t.childNodes,function(i){return e.Range(i).range.inRange(r)?(t=i,!1):void 0}),t},rect:function(t){var r=this.range.getBoundingClientRect();if(r.height||r.width||(r=this.range.getClientRects()[0]),"page"===t){var i=v();r=e.extend({},r),r.top+=i.top,r.left+=i.left}return r},rects:function(t){for(var r=e.map(e.makeArray(this.range.getClientRects()).sort(function(e,t){return t.width*t.height-e.width*e.height}),function(t){return e.extend({},t)}),i=0,n,s=r.length;i<r.length;){var a=r[i],o=!1;for(n=i+1;n<r.length;)if(m(a,r[n])){if(r[n].width){o=r[n];break}r.splice(n,1)}else n++;o?r.splice(i,1):i++}if("page"==t){var l=v();return e.each(r,function(e,t){t.top+=l.top,t.left+=l.left})}return r}}),function(){var i=e.Range.prototype,n=e.Range().range;i.compare=n.compareBoundaryPoints?function(e,t){return this.range.compareBoundaryPoints(this.window().Range[r(e)],t.range)}:function(e,r){return this.range.compareEndPoints(t(e),r.range)},i.move=n.setStart?function(e,t){var r=t.range;switch(e){case"START_TO_END":this.range.setStart(r.endContainer,r.endOffset);break;case"START_TO_START":this.range.setStart(r.startContainer,r.startOffset);
break;case"END_TO_END":this.range.setEnd(r.endContainer,r.endOffset);break;case"END_TO_START":this.range.setEnd(r.startContainer,r.startOffset)}return this}:function(e,r){return this.range.setEndPoint(t(e),r.range),this};var s=n.cloneRange?"cloneRange":"duplicate",o=n.selectNodeContents?"selectNodeContents":"moveToElementText";i.clone=function(){return e.Range(this.range[s]())},i.select=n.selectNodeContents?function(e){if(e)this.range.selectNodeContents(e);else{var t=this.window().getSelection();t.removeAllRanges(),t.addRange(this.range)}return this}:function(e){if(e)if(3===e.nodeType){var t=e.parentNode,r=0,i;a(t.childNodes,function(t){return t===e?(i=r+t.nodeValue.length,!1):void(r+=t.nodeValue.length)}),this.range.moveToElementText(t),this.range.moveEnd("character",i-this.range.text.length),this.range.moveStart("character",r)}else this.range.moveToElementText(e);else this.range.select();return this}}();var a=function(e,t){for(var r,i,n=0;e[n];n++)if(r=e[n],3===r.nodeType||4===r.nodeType){if(t(r)===!1)return!1}else if(8!==r.nodeType&&a(r.childNodes,t)===!1)return!1},o=function(e){return 3===e.nodeType||4===e.nodeType},l=function(e,t){return function(r,i){return r[e]&&!i?o(r[e])?r[e]:arguments.callee(r[e]):r[t]?o(r[t])?r[t]:arguments.callee(r[t]):r.parentNode?arguments.callee(r.parentNode,!0):void 0}},h=l("firstChild","nextSibling"),u=l("lastChild","previousSibling"),c=function(e,t,r){var i=0>r?u:h;return o(e)?0>t+r?p(i(e),t+r):p(e,t+r):(e=e.childNodes[t]?e.childNodes[t]:e.lastChild,o(e)||(e=i(e)),p(e,r))},p=function(e,t){var r=0>t?u:h;for(t=Math.abs(t);e&&t>=e.nodeValue.length;)t-=e.nodeValue.length,e=r(e);return{node:e,offset:r===h?t:e.nodeValue.length-t}},d,g=function(e){return null==d&&(d="isElementContentWhitespace"in e),d?e.isElementContentWhitespace:3===e.nodeType&&""==e.data.trim()},f=function(e,t){return e.left<=t.clientX&&e.left+e.width>=t.clientX&&e.top<=t.clientY&&e.top+e.height>=t.clientY},m=function(e,t){return f(e,{clientX:t.left,clientY:t.top})&&f(e,{clientX:t.left+t.width,clientY:t.top})&&f(e,{clientX:t.left,clientY:t.top+t.height})&&f(e,{clientX:t.left+t.width,clientY:t.top+t.height})},v=function(e){var e=e||window;return doc=e.document.documentElement,body=e.document.body,{left:(doc&&doc.scrollLeft||body&&body.scrollLeft||0)+(doc.clientLeft||0),top:(doc&&doc.scrollTop||body&&body.scrollTop||0)+(doc.clientTop||0)}};return s.moveToPoint=!!e.Range().range.moveToPoint,e}(e,t)}),Function.prototype.debounce=function(e){var t=this,r=null,i=e;return function(){function e(){t.apply(n,s),r=null}var n=this,s=arguments;r&&clearTimeout(r),r=setTimeout(e,i)}},Function.prototype.throttle=function(e){var t=this,r=null,i=e;return function(){var e=this,n=arguments,s=Date.now();(!r||s-r>=i)&&(r=s,t.apply(e,n))}},sumo.define("limit",function(){}),sumo.define("331c6750-848e-4469-b1bb-bfbb4fa4cd99/highlighter",["jquery","jquery.cookie","plugins/text!331c6750-848e-4469-b1bb-bfbb4fa4cd99/templates/highlighter.html","plugins/text!331c6750-848e-4469-b1bb-bfbb4fa4cd99/templates/highlighter_mobile.html","twitter-text","jquery.style","jquery.displayrules","selectorator","range","limit"],function(e,t,r,i,n){function s(){return e.browser.mobile&&("ontouchstart"in window||!!navigator.msMaxTouchPoints)}function a(t,r){var i=e._data(t,"events");return i&&i[r]||t.onclick?!0:!1}function o(t,r){function i(e,t){var r=n.substring(e,t).search(l);r>-1&&(anyHTMLmatch=n.substring(e+r,t).match(l)[0],n=n.substring(0,r+e)+P+anyHTMLmatch+S+n.substring(e+r+anyHTMLmatch.length),e+=r+S.length+anyHTMLmatch.length+P.length,t+=S.length+P.length,i(e,t))}var n=e(t).html(),s=e(t).html(),a=[],o=[],l=/<[^>]*>/,u=/<[^>]*>|&nbsp;/,c=/(<[^>]*>)/,p=/^<([-A-Za-z0-9_]+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,d=/^<\/([-A-Za-z0-9_]+)[^>]*>/,g=/([-A-Za-z0-9_]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,f=["a","abbr","acronym","applet","b","basefont","bdo","big","br","button","cite","code","del","dfn","em","font","i","iframe","img","input","ins","kbd","label","map","object","q","s","samp","script","select","small","span","strike","strong","sub","sup","textarea","tt","u"],m=/&nbsp;/,v=r.entry;v=v.replace(/\xA0/g," ");var _=/<[^>]*>|\&nbsp;/i,w;if(a=n.match(/<[^>]*>|&nbsp;/gi),o=[],a)for(var b=0;b<a.length;b++){if(0==b)var y=0;else var y=o[b-1];var x=n.substring(y).indexOf(a[b]),T=y+x;o.push(T),n="&nbsp;"==a[b].toLowerCase()?n.substring(0,T)+" "+n.substring(T+a[b].length):n.substring(0,T)+n.substring(T+a[b].length)}var v=e("<div/>").html(v).text().trim();v=v.replace(/\xA0/g," ");var C=n.indexOf(v);if(C>-1){var S="<span class='sumo_twilighter_highlighted twilighter-"+r.hash+"'>",k="<span class='sumo_twilighter_shares'>"+(0===r.share_count?"":h(r.share_count))+"</span></span>",P="</span>",A=C+v.length;n=n.substring(0,C)+S+n.substring(C,A)+k+n.substring(A);for(var I=0,R=0,T=o[b],O=0,E=0,q=[],L=[],z=[],b=o.length-1;b>=0;b--){var T=o[b];C>T&&(O+=a[b].length,"&nbsp;"==a[b].toLowerCase()&&(O-=1)),A>T&&(o[b]>=C&&(q.push(a[b]),L.push(T-C+S.length)),E+=a[b].length,"&nbsp;"==a[b].toLowerCase()&&(E-=1))}for(var N=n.substring(C,A+S.length+k.length),b=0;b<L.length;b++)N=N.substring(0,L[b])+q[b]+N.substring(L[b]+("&nbsp;"==q[b].toLowerCase()?1:0));n=s.substring(0,O+C)+N+s.substring(E+A);var T=n.indexOf(S)+S.length,j=n.indexOf(k),U=[];T>-1&&j>-1&&(i(T,j),t.innerHTML=n,e(t).find(".sumo_twilighter_highlighted").invert())}}function l(){return window.getSelection?window.getSelection().toString():document.selection?document.selection.createRange().text:""}function h(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function u(){var t=window.location.href;return!j||Q?(Q&&(t=Q),t):void e.ajax({type:"POST",dataType:"json",url:N.properties.sumoUrl+"/apps/twilighter/shorten",data:{site_id:N.properties.siteId,href:t},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(e){return e.success?(t=e.url,Q=e.url,t):t})}function c(t){var r=window.location.href,i=("https:"===location.protocol,23),n=0,a=!0;if(U){var o=t.split(" ").reverse();o.forEach(function(e){n||e.match(/^https?:\/\//i)&&(n=e.length)}),(t.match(/https?:\/\//i)||t.match(/ via @/i))&&(a=!1)}if(j&&!Q)e.ajax({type:"POST",dataType:"json",url:N.properties.sumoUrl+"/apps/twilighter/shorten",data:{site_id:N.properties.siteId,href:r},xhrFields:{withCredentials:!1},crossDomain:!0}).done(function(o){o.success&&(r=o.url,Q=o.url);var l=140-i+n;H&&(U&&t.match(/ via @/i)||(l-=("@"==H[0]?5:6)+H.length));var h=t.trim();h=h.replace(/\r\n|\n|\r/g," "),(U&&a||!U&&h.length+1>l)&&(h=h.substr(0,l-2)+"…");var u=H?" via "+("@"==H[0]?"":"@")+H:"";U&&(h.match(/https?:\/\//i)&&(r=""),h.match(/ via @/i)&&(u="")),(r||u)&&(h=h+(r?" "+r:"")+u),e("#sumo_twilighter_input").val(h).data({"sumome-twilighter-url":r,"sumome-twilighter-via":u,"sumome-twilighter-msg":h}),s()||C()});else{Q&&(r=Q);var l=140-i+n;H&&(U&&t.match(/ via @/i)||(l-=("@"==H[0]?5:6)+H.length));var h=t.trim();h=h.replace(/\r\n|\n|\r/g," "),(U&&a||!U&&h.length+1>l)&&(h=h.substr(0,l-2)+"…");var u=H?" via "+("@"==H[0]?"":"@")+H:"";U&&(h.match(/https?:\/\//i)&&(r=""),h.match(/ via @/i)&&(u="")),(r||u)&&(h=h+(r?" "+r:"")+u),e("#sumo_twilighter_input").val(h).data({"sumome-twilighter-url":r,"sumome-twilighter-via":u,"sumome-twilighter-msg":h}),s()||C()}}function p(e){var t="https://twitter.com/intent/tweet",r=t+"?text="+encodeURIComponent(e)+"&related="+encodeURIComponent("thesumome For your own twitter highlighter plugin");return r}function d(t){var r="",i=document.title,n=u();if(e('meta[property="og:description"]').attr("content")&&(i=e('meta[property="og:description"]').attr("content")),e('meta[property="og:image"]').attr("content")&&(r=e('meta[property="og:image"]').attr("content")),U){var s=e("#sumo_twilighter_input").data("sumome-twilighter-msg");if(s.indexOf(n)<0&&s.match(/https?:\/\//i)){var a=s.split(" ").reverse();a.forEach(function(e){e.match(/^https?:\/\//i)&&(n=e)})}}var o="https://www.facebook.com/dialog/feed?app_id=214248668771590&display=popup",l=o+"&link="+encodeURIComponent(n)+"&caption="+t+"&name="+encodeURIComponent(document.title)+"&description="+encodeURIComponent(i)+"&redirect_uri="+encodeURIComponent("http:"+N.properties.sumoUrl)+"/apps/twilighter/fbshared&picture="+r;return l}function g(t){if(t&&t.length){var r=t.shift(),i=!1,n=!1;e(".sumo_twilighter_highlighted").each(function(t){e(e(".sumo_twilighter_highlighted")[t]).text().indexOf(r.entry)>-1?i=!0:e(e(".sumo_twilighter_highlighted")[t]).closest("[rel~=noshare]").length&&(n=!0)});var s;if(e(r.selector)&&e(r.selector).length)var s=e(r.selector);else if(r.selector){var a=/\#[^\s]+\./g,l=/\#[^\s]+/g,h=r.selector,u=h.match(a);if(u)for(var c=0,p=u.length;p>c;c++)h=h.replace(/\#[^\s]+\./,"[id="+u[c].substring(1,u[c].length-1)+"].");var u=h.match(l);if(u)for(var c=0,p=u.length;p>c;c++)h=h.replace(/\#[^\s]+/,"[id="+u[c].substring(1)+"]");e(h).length&&(s=e(h))}if(s&&!i&&!n){var d=s.html();o(s[0],r),e(".twilighter-"+r.hash).hover(function(){e(".twilighter-"+r.hash).css({cursor:"pointer"}).invert("0.3")},function(){e(".twilighter-"+r.hash).css({cursor:"inherit"}).invert()})}window.setTimeout(function(){g(t)},0)}else e(".sumo_twilighter_shares").mousedown(function(){return!1})}function f(){e(".sumo_twilighter_highlighted").contents().unwrap()}function m(e){var t,r,i,s=e,a="https:"===location.protocol?"0123456789012345":"012345678901234",o=n.txt.extractUrlsWithIndices(e,{extractUrlsWithoutProtocol:!0}),l=140;if(i=o.length,i>0)for(var r=0;i>r;r++)t=o[r].url,s=s.replace(t,a);return l-=s.length}function v(t){for(var r=e(t).attr("class").split(" "),i=0;i<r.length;i++)if("twilighter-"==r[i].substring(0,"twilighter-".length))return r[i].split("-")[1];return""}function _(t){function r(t,r){var i="text-width-tester",n=e("#"+i);return n.length?n.css({font:r}).html(t):(n=e('<span id="'+i+'" style="display:none;font:'+r+';">'+t+"</span>"),e("body").append(n)),{width:n.width(),height:n.height()}}function i(t,i,n,s){var a=e(t),o="M",l=a.height()+5,h=n+" "+i+"px "+s,u=r(o,h).height;u>l?(i=i*l/u*.9,16>i&&(i=16),h=n+" "+i+"px "+s,a.css({font:h})):a.css({font:h})}function n(){var t=24,r=t<.05*window.innerHeight?.05*window.innerHeight:t,n=e("#sumo_twilighter_div").width(),s=e("#sumo_twilighter_div").innerHeight(),a=r,o=Math.floor(.075*window.innerHeight),l=o>a?a:o,h=Math.floor(.65*l),u=Math.floor(.65*l);e(".sumo_highlighter_mobile").css({"background-size":40>s?"0px":Math.round(158*(Math.round(.03*window.innerHeight)/23))+"px "+Math.round(.03*window.innerHeight)+"px"}),e(".sumo_twilighter_m_fb .btn-icon").css({"background-size":u+"px "+h+"px",height:h+"px",width:u+"px",left:Math.floor((o-u)/2)-1+"px",top:Math.round((a-h)/2)-1+"px"}),e(".sumo_twilighter_m_tweet .btn-icon").css({"background-size":u+"px "+h+"px",height:h+"px",width:u+"px",left:Math.floor((o-u)/2)-1+"px",top:Math.round((a-h)/2)-1+"px"}),e(".sumo_twilighter_m_fb a").css({height:a+"px",width:o+"px"}),e(".sumo_twilighter_m_tweet a").css({height:a+"px",width:o+"px"}),e(".sumo_highlighter_m_right").css({width:2*o+8+"px"}),e(".sumo_twilighter_m_input_div").css({height:r+"px"}),i(document.getElementById("sumo_twilighter_input"),200,"normal","Georgia, serif")}if(U&&!N.properties.user&&!(e(t.target).closest("#sumo_twilighter_div").length||(e(t.target).closest(".sumo_twilighter_highlighted").length||e(t.target).closest(".sumo_twilighter_shares").length)&&v(e(t.target).closest(".sumo_twilighter_highlighted"))))return void e("#sumo_twilighter_div").hide();if(e(".sumo_twilighter_shares").css("visibility","hidden"),e(t.target).closest("#sumo_twilighter_div").length||e(t.target).is("a")&&"sumo_twilighter_btn"!=e(t.target).attr("id")||e(t.target).parents("a").length||a(t.target,"click")||e(t.target).closest("[rel~=noshare]").length)return void e(".sumo_twilighter_shares").css("visibility","visible");if("selectionchange"==t.type){if(0==e.Range.current().toString().length)return void e(".sumo_twilighter_shares").css("visibility","visible");var o=e.Range.current(),l=o.parent();if(e(l).hasClass("sumo_twilighter_highlighted")&&(l=e(l).parent()[0]),(l.nodeType===Node.TEXT_NODE||l.nodeType===Node.CDATA_SECTION_NODE)&&(l=l.parentNode),e(l).closest("#sumo_twilighter_div").length)return void e(".sumo_twilighter_shares").css("visibility","visible")}var h=!1;e("#sumo_twilighter_input").val(""),O="";var u={ignore:{classes:["sumo_twilighter_tweet","sumo_twilighter_highlighted"],ids:["sumo_twilighter_div"]}},p=!1;if((e(t.target).closest(".sumo_twilighter_highlighted").length||e(t.target).closest(".sumo_twilighter_shares").length)&&v(e(t.target).closest(".sumo_twilighter_highlighted"))){O=v(e(t.target).closest(".sumo_twilighter_highlighted"));var d=F[O].entry;p=!0}else var d=e.Range.current().toString();if(d=d.replace(/\xA0/g," "),O||d&&d.length>6&&d.length<250&&d.split(/[\u4e00-\u9fcc]|\s+/g).length>2)if(s()||!s()&&I!=d){if(I=d,R=d,O)E=F[O].selector;else{var o=e.Range.current();I=e.Range.current().toString().trim(),R=e.Range.current().toString().trim();var l=o.parent();e(l).hasClass("sumo_twilighter_highlighted")&&(l=e(l).parent()[0]),(l.nodeType===Node.TEXT_NODE||l.nodeType===Node.CDATA_SECTION_NODE)&&(l=l.parentNode);var g=e(l).range(),f=g.toString().indexOf(I);f>0&&g.start("+"+f),g.toString().length-I.length>0&&g.end("-"+(g.toString().length-I.length));var m=g.parent();e(m).hasClass("sumo_twilighter_highlighted")&&(m=e(m).parent()[0]),(m.nodeType===Node.TEXT_NODE||m.nodeType===Node.CDATA_SECTION_NODE)&&(m=m.parentNode),E=e(m).getSelector()[0]}var _=-1;if(!O){var w=/<[^>]*>/g,b=/&nbsp;/gi;if(e(E).length)elementHtml=e(E)[0].innerHTML;else{var y=/\#[^\s]+\./g,x=/\#[^\s]+/g,T=E,C=T.match(y);if(C)for(var S=0,k=C.length;k>S;S++)T=T.replace(/\#[^\s]+\./,"[id="+C[S].substring(1,C[S].length-1)+"].");var C=T.match(x);if(C)for(var S=0,k=C.length;k>S;S++)T=T.replace(/\#[^\s]+/,"[id="+C[S].substring(1)+"]");e(T).length&&(elementHtml=e(T)[0].innerHTML)}if(!elementHtml)return I="",E="",O="",R="",e("#sumo_twilighter_div").hide(),void e(".sumo_twilighter_shares").css("visibility","visible");var P;elementHtml=elementHtml.replace(/\<span class=[\'|\"]sumo_twilighter_shares[\'|\"].*?\>[-,0-9 ]+\<\/span\>/,""),elementHtml=elementHtml.replace(w,""),elementHtml=elementHtml.replace(b," "),_=elementHtml.indexOf(d)}if(h||0>_&&!O)return I="",E="",O="",R="",e("#sumo_twilighter_div").hide(),void e(".sumo_twilighter_shares").css("visibility","visible");U&&"undefined"!=typeof F[O]&&"undefined"!=typeof F[O].admin_message&&(I=F[O].admin_message),c(I),e("#sumo_twilighter_div").is(":visible")||(p?N.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"click"}):N.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"highlight"}),N.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"popup"})),div_width=e("#sumo_twilighter_div").outerWidth(),div_height=e("#sumo_twilighter_div").outerHeight(),win_height=e(window).height()+e(window).scrollTop(),win_width=e(window).width()+e(window).scrollLeft(),s()?(e("#sumo_twilighter_div").css(z).show(),n(),e("#sumo_twilighter_input").focus(function(e){n()}),e(window).resize(function(t){e(":focus").hasClass("sumo_twilighter_m_input")||n()}.debounce(300))):(z.top<0?e("#sumo_twilighter_div").css({top:0}):z.top+div_height>win_height?e("#sumo_twilighter_div").css({top:win_height-div_height}):e("#sumo_twilighter_div").css({top:z.top}),U&&N.properties.user?e(".sumo_twilighter_admin_highlight").show():e(".sumo_twilighter_admin_highlight").hide(),N.properties.user?e(".sumo_twilighter_admin").show():e(".sumo_twilighter_admin").hide(),z.left<0?e("#sumo_twilighter_div").css({left:0}).show():z.left+div_width>win_width?e("#sumo_twilighter_div").css({left:win_width-div_width}).show():e("#sumo_twilighter_div").css({left:z.left}).show())}else e(t.target).is("#sumo_twilighter_div")||e(t.target).parents("#sumo_twilighter_div").length||(I="",E="",O="",R="",e("#sumo_twilighter_div").css(z).hide(),e(".sumo_twilighter_shares").css("visibility","visible"));else I="",E="",O="",R="",e("#sumo_twilighter_div").hide(),e(".sumo_twilighter_shares").css("visibility","visible");e(".sumo_twilighter_shares").css("visibility","visible")}function w(){var t;if(e(E).length)var t=e(E);else{var r=/\#[^\s]+\./g,i=/\#[^\s]+/g,n=E,s=n.match(r);if(s)for(var a=0,o=s.length;o>a;a++)n=n.replace(/\#[^\s]+\./,"[id="+s[a].substring(1,s[a].length-1)+"].");var s=n.match(i);if(s)for(var a=0,o=s.length;o>a;a++)n=n.replace(/\#[^\s]+/,"[id="+s[a].substring(1)+"]");e(n).length&&(t=e(n))}t&&(t.find(".sumo_twilighter_highlighted").each(function(t,r){e(r).replaceWith(e(r).html())}),t.find(".sumo_twilighter_shares").each(function(t,r){e(r).remove()}))}function b(t){var r=e("#sumo_twilighter_input").data("sumome-twilighter-url"),i=e("#sumo_twilighter_input").data("sumome-twilighter-via"),n=e("#sumo_twilighter_input").val().replace(r,"").replace(i,"").trim();e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:N.properties.sumoUrl+"/apps/twilighter/admin/save",data:{session_id:N.properties.sessionId,site_id:N.properties.siteId,entry:I,pathname:location.pathname,selector:E,hash:O,message:n},success:function(t){if(t.entry){var r=t.entry;if(F[r.hash]=r,"[object Array]"===Object.prototype.toString.call(r.selector))var i=r.selector[0];else var i=r.selector;var n;if(e(i)&&e(i).length)var n=e(i);else if(i){var s=/\#[^\s]+\./g,a=/\#[^\s]+/g,l=i,h=l.match(s);if(h)for(var u=0,c=h.length;c>u;u++)l=l.replace(/\#[^\s]+\./,"[id="+h[u].substring(1,h[u].length-1)+"].");var h=l.match(a);if(h)for(var u=0,c=h.length;c>u;u++)l=l.replace(/\#[^\s]+/,"[id="+h[u].substring(1)+"]");e(l).length&&(n=e(l))}n&&(n.find(".sumo_twilighter_highlighted").each(function(t,r){e(r).replaceWith(e(r).html())}),n.find(".sumo_twilighter_shares").each(function(t,r){e(r).remove()}),n&&(o(n[0],r),e("#twilighter-"+r.hash).mousedown(_),e(".twilighter-"+r.hash).hover(function(){e(".twilighter-"+r.hash).css({cursor:"pointer"}).invert("0.3")},function(){e(".twilighter-"+r.hash).css({cursor:"inherit"}).invert()})))}I="",E="",O="",e("#sumo_twilighter_div").css(q).hide()}})}function y(t){e.ajax({type:"POST",dataType:"json",beforeSend:function(t){t.setRequestHeader("X-Sumo-Auth",e.cookie("__smToken"))},xhrFields:{withCredentials:!1},crossDomain:!0,url:N.properties.sumoUrl+"/apps/twilighter/delete",data:{site_id:N.properties.siteId,entry:I,pathname:location.pathname,selector:E,hash:O},success:function(t){t.success&&(w(),e("#sumo_twilighter_div").css(q).hide())}})}function x(t){function r(e,t,r,i){var n=void 0!=window.screenLeft?window.screenLeft:screen.left,s=void 0!=window.screenTop?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var a=width/2-r/2+n,o=height/2-i/2+s,l=window.open(e,t,"width="+r+", height="+i+", top="+o+", left="+a);window.focus&&l.focus()}e(t.target).is("a")&&0==e(t.target).closest("#sumo_twilighter_btn").length||(N.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"twitter"}),r(p(e("#sumo_twilighter_input").val()),"Tweet",575,350),e.ajax({type:"POST",dataType:"json",url:N.properties.sumoUrl+"/apps/twilighter/share",data:{entry:I,siteId:N.properties.siteId,pathname:location.pathname,selector:E,sessionId:N.properties.sessionId,clickType:"tweet",hash:O},xhrFields:{withCredentials:!1},crossDomain:!0}).success(function(t){if(t.entry){var r=t.entry;if(F[r.hash]=r,"[object Array]"===Object.prototype.toString.call(r.selector))var i=r.selector[0];else var i=r.selector;var n;if(e(i)&&e(i).length)var n=e(i);else if(i){var s=/\#[^\s]+\./g,a=/\#[^\s]+/g,l=i,h=l.match(s);if(h)for(var u=0,c=h.length;c>u;u++)l=l.replace(/\#[^\s]+\./,"[id="+h[u].substring(1,h[u].length-1)+"].");var h=l.match(a);if(h)for(var u=0,c=h.length;c>u;u++)l=l.replace(/\#[^\s]+/,"[id="+h[u].substring(1)+"]");e(l).length&&(n=e(l))}n&&(n.find(".sumo_twilighter_highlighted").each(function(t,r){e(r).replaceWith(e(r).html())}),n.find(".sumo_twilighter_shares").each(function(t,r){e(r).remove()}),n&&(o(n[0],r),e("#twilighter-"+r.hash).mousedown(_),e(".twilighter-"+r.hash).hover(function(){e(".twilighter-"+r.hash).css({cursor:"pointer"}).invert("0.3")},function(){e(".twilighter-"+r.hash).css({cursor:"inherit"}).invert()})))}I="",E="",O="",e("#sumo_twilighter_div").css(q).hide()}))}function T(t){function r(e,t,r,i){var n=void 0!=window.screenLeft?window.screenLeft:screen.left,s=void 0!=window.screenTop?window.screenTop:screen.top;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var a=width/2-r/2+n,o=height/2-i/2+s,l=window.open(e,t,"width="+r+", height="+i+", top="+o+", left="+a);window.focus&&l.focus()}e(t.target).is("a")&&0==e(t.target).closest("#sumo_twilighter_btn_fb").length||(N.emit("event",{appId:"331c6750-848e-4469-b1bb-bfbb4fa4cd99",event:"facebook"}),r(d(R),"Facebook Share",575,350),e.ajax({type:"POST",dataType:"json",url:N.properties.sumoUrl+"/apps/twilighter/share",data:{entry:I,siteId:N.properties.siteId,pathname:location.pathname,selector:E,sessionId:N.properties.sessionId,clickType:"tweet",hash:O},xhrFields:{withCredentials:!1},crossDomain:!0}).success(function(t){if(t.entry){var r=t.entry;if(F[r.hash]=r,"[object Array]"===Object.prototype.toString.call(r.selector))var i=r.selector[0];else var i=r.selector;if(!e(i).length){var n=/\#[^\s]+\./g,s=/\#[^\s]+/g,a=i,l=a.match(n);if(l)for(var h=0,u=l.length;u>h;h++)a=a.replace(/\#[^\s]+\./,"[id="+l[h].substring(1,l[h].length-1)+"].");var l=a.match(s);if(l)for(var h=0,u=l.length;u>h;h++)a=a.replace(/\#[^\s]+/,"[id="+l[h].substring(1)+"]");e(a).length&&(i=a)}e(i).find(".sumo_twilighter_highlighted").each(function(t,r){e(r).replaceWith(e(r).html())}),e(i).find(".sumo_twilighter_shares").each(function(t,r){e(r).remove()}),e(i)&&e(i).length&&(o(e(i)[0],r),e("#twilighter-"+r.hash).mousedown(_),e(".twilighter-"+r.hash).hover(function(){e(".twilighter-"+r.hash).css({cursor:"pointer"}).invert("0.3")},function(){e(".twilighter-"+r.hash).css({cursor:"inherit"}).invert()}))}I="",E="",O="",e("#sumo_twilighter_div").hide()}))}function C(){var t=m(e("#sumo_twilighter_input").val());e(".sumo_twilighter_remaining").text(t),0>t?e(".sumo_twilighter_remaining").css("color","red"):e(".sumo_twilighter_remaining").css("color",G)}function S(e){this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase();for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),255]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3]),parseInt(e[4])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),255]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),255]}}],r=0;r<t.length;r++){var i=t[r].re,n=t[r].process,s=i.exec(e);s&&(channels=n(s),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.a=channels[3],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.a=this.a<0||isNaN(this.a)?0:this.a>255?255:this.a,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),"#"+e+t+r}}function k(e){var t,r,i,n;return e.toHex&&(e="#"+e.toHex()),e.match(/^rgb/)?(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/),t=e[1],i=e[2],r=e[3]):(e=+("0x"+e.slice(1).replace(e.length<5&&/./g,"$&$&")),t=e>>16,i=e>>8&255,r=255&e),n=Math.sqrt(.299*(t*t)+.587*(i*i)+.114*(r*r)),n>127.5?"light":"dark"}function P(e){return"light"==k(e)?"black":"white"}function A(e,t){e=e.toString();var r=parseInt(e.slice(1),16),i=Math.round(2.55*t),n=(r>>16)+i,s=(r>>8&255)+i,a=(255&r)+i;return"#"+(16777216+65536*(255>n?1>n?0:n:255)+256*(255>s?1>s?0:s:255)+(255>a?1>a?0:a:255)).toString(16).slice(1)}var I,R,O,E,q,L,z,N,j=!1,U=!1,D=!1,Q,H="",F={},$="#f0f0f0",B="#4c66a4",M="#3484bf",X="white",W="white",G="#999",V=!1,Z;!function(t){(e.browser=e.browser||{}).mobile=/(android|bb\d+|meego).+mobile|android|ipad|playbook|silk|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera),e.fn.invert=function(e){var e=e||"0.15",t="color";if(this.css(t)){var r=new S(this.css(t));r.ok&&this.css("background-color","rgba("+r.r+","+r.g+","+r.b+","+e+")")}};var Y={settings:{},initialize:function K(){this.api.on("331c6750-848e-4469-b1bb-bfbb4fa4cd99/service/reload",e.proxy(function(){this.load(!0)},this)),this.load()},load:function(t){"undefined"!=typeof t&&t&&(e(".sumo_twilighter_shares").remove(),f());var n;N=this.api,Z=N.properties.baseUrl+"images/apps/331c6750-848e-4469-b1bb-bfbb4fa4cd99/",e.ajax({type:"POST",dataType:"json",url:this.api.properties.sumoUrl+"/apps/twilighter/load",data:{site_id:this.api.properties.siteId,pathname:location.pathname,geoLocation:this.api.properties.geoLocation,pageViews:this.api.properties.views,userAgent:navigator.userAgent},xhrFields:{withCredentials:!1},crossDomain:!0}).done(e.proxy(function(t){if(t&&"success"in t&&t.success&&(e.extend(this.settings,t),this.settings.ctry=this.api.properties.geoLocation&&this.api.properties.geoLocation.ctry?this.api.properties.geoLocation.ctry:!1,this.settings.views=this.api.properties.views?this.api.properties.views:1,this.settings.reflink="https://sumome.com/?src=sm-hl-"+this.api.properties.siteId,e.isCurrentUrlAllowed(this.settings.display_rules,null,this.settings.ctry,this.settings.views))){if(t.entries&&t.entries.length&&(n=t.entries,n.forEach(function(e){F[e.hash]=e}),window.setTimeout(function(){g(n.slice())},0)),"undefined"!=typeof t.useUrlShortener&&(j=t.useUrlShortener),"undefined"!=typeof t.useAdminHighlights&&(U=t.useAdminHighlights),"undefined"!=typeof t.viaTwitterHandle&&t.viaTwitterHandle&&t.viaTwitterHandle.trim()&&(H=t.viaTwitterHandle.trim()),t.modalColor&&($=t.modalColor),t.fbButtonColor&&(B=t.fbButtonColor),t.twButtonColor&&(M=t.twButtonColor),"starter"in t&&(D=t.starter),X=P(B),W=P(M),s()?(e("body").append(i),e(".sumo_twilighter_m_fb").on("click",T),e(".sumo_twilighter_m_tweet").on("click",x),e(".sumo_highlighter_mobile").css("background-color",$,"important"),e(".sumo_twilighter_m_fb a").css("background-color",B,"important"),e(".sumo_twilighter_m_tweet a").css("background-color",M,"important"),e(".sumo_twilighter_m_fb .btn-text").css("color",X,"important"),e(".sumo_twilighter_m_tweet .btn-text").css("color",W,"important"),e(".sumo_twilighter_m_fb .btn-icon").css("background-image","url("+Z+"facebook-"+X+"-60.png)","important"),e(".sumo_twilighter_m_tweet .btn-icon").css("background-image","url("+Z+"twitter-"+W+"-60.png)","important")):(e("body").append(r),D?e(".sumo_highlighter_desktop").css("padding","15px"):e(".sumo_twilighter_remaining").before('<a target="_blank" class="sumo_twilighter_logo" href="'+this.settings.reflink+'">Powered by SumoMe</a>'),e(".sumo_twilighter_fb").on("click",T),e(".sumo_twilighter_tweet").on("click",x),G=A($,"light"==k($)?-45:45),e(".sumo_highlighter_desktop").css("background-color",$,"important"),e(".sumo_twilighter_remaining").css("color",G,"important"),e(".sumo_twilighter_logo").css("color",G,"important"),e(".sumo_twilighter_admin_highlight").find("a").css("color",G,"important"),e(".sumo_twilighter_admin").find("a").css("color",G,"important"),e(".sumo_twilighter_fb a").css("background-color",B,"important"),e(".sumo_twilighter_tweet a").css("background-color",M,"important"),e(".sumo_twilighter_fb .btn-text").css("color",X,"important"),e(".sumo_twilighter_tweet .btn-text").css("color",W,"important"),e(".sumo_twilighter_fb .btn-icon").attr("src",Z+"facebook-"+X+"-60.png"),e(".sumo_twilighter_tweet .btn-icon").attr("src",Z+"twitter-"+W+"-60.png")),U&&N.properties.user&&e(".sumo_twilighter_admin_highlight").find("a").on("click",b),N.properties.user&&e(".sumo_twilighter_admin").find("a").on("click",y),s()||e("#sumo_twilighter_input").keyup(function(){C()}),V)return;s()?(e(document).on("selectionchange",function(t){var r=0,i=0;if(window.getSelection&&document.createRange&&"undefined"!=typeof document.createRange().getBoundingClientRect){var n=window.getSelection();if(n.rangeCount>0){var s=n.getRangeAt(0).getBoundingClientRect();r=s.left,i=s.top}}else if(document.selection&&"Control"!=document.selection.type){var a=document.selection.createRange();r=a.boundingLeft,i=a.boundingTop}L={top:i/e(window).height()>=.5?0:"auto",bottom:i/e(window).height()>=.5?"auto":0,left:(e(window).width()+e(window).scrollLeft())/2-e("#sumo_twilighter_div").outerWidth()/2},z=L,_(t.originalEvent)}),e(window).on("touchstart",function(t){e(t.target).on("touchend",function(t){var r=t.target;L={top:(r.getBoundingClientRect().top+r.getBoundingClientRect().height/2)/e(window).height()>=.5?0:"auto",bottom:(r.getBoundingClientRect().top+r.getBoundingClientRect().height/2)/e(window).height()>=.5?"auto":0,left:(e(window).width()+e(window).scrollLeft())/2-e("#sumo_twilighter_div").outerWidth()/2},z=L,_(t),e(t.target).off("touchend")}),e(t.target).on("touchmove",function(t){e(t.target).off("touchend")})}),e(window).on("touchmove",function(t){e("#sumo_twilighter_div").is(":visible")&&!e(t.target).closest("#sumo_twilighter_div").length&&(I="",
E="",O="",e("#sumo_twilighter_div").hide())})):(e(window).mousemove(function(e){q={top:e.pageY,left:e.pageX},z=q}.throttle(150)),e(window).on("mouseup",function(e){1===e.which&&_(e)})),V=!0}},this))}};return Y}),sumo.define("331c6750-848e-4469-b1bb-bfbb4fa4cd99/service",["jquery","331c6750-848e-4469-b1bb-bfbb4fa4cd99/highlighter"],function(e,t){return function(e){var r=function(r,i){sumo.require(["plugins/css!../css/highlighter-popup.css"],function(){var r=e;t.api=e,t.initialize(),i()})},i=function(e){e()};return{init:r,destroy:i}}}),sumo.define("331c6750-848e-4469-b1bb-bfbb4fa4cd99/service",function(){})}(void 0,void 0);