/**
 * iJento Tags 14.0.39
 * Copyright (C) 2014 iJento LTD
 * 7865cd3f417ef7fca7821180f68b89ebe79dc8a2
 */
(function(f){var p=f.iJentoTagObject&&f[f.iJentoTagObject]?f[f.iJentoTagObject]:null;if(p){var x=function(a,b,c){this.parentModule=a;this.formElement=b;this.formParams=c;this.submitListener=!1;this.lastSubmitEl=null},q=function(a,b){for(var c=0;c<a.forms.length;c++)if(b===a.forms[c].formElement)return a.forms[c];return null},r=function(a){return!a.nodeName||"input"!=a.nodeName.toLowerCase()&&"button"!=a.nodeName.toLowerCase()||"submit"!=a.type&&"image"!=a.type?!1:!0},t=function(a,b){for(var c=[],
d=a.formElement.elements,e=0;e<d.length;e++){var h=d[e];(b.type&&b.name&&h.type&&h.name&&h.name===b.name&&h.type===b.type||h===b)&&c.push(h)}return c},k=function(a,b){return a[b]?a[b]:null},y=function(a,b){var c="ijentoActions4"+b.parentModule.parentTracker.get("name");a[c]||(a[c]={});return a[c]},u=function(a,b,c){if(r(a))return!0;for(var d=!1,e=0;e<b.length&&!d;e++)if(a.name&&b[e]===a.name||a.id&&b[e]===a.id)d=!0;return d===c},z=function(a,b,c){return function(){s(a,b,c)}},v=function(a,b){if(r(a)||
"hidden"==a.type&&!b.formParams.submitAllowHidden)return null;if("radio"===a.type){for(var c=t(b,a),d=0;d<c.length;d++)if(c[d].checked)return k(c[d],"value");return null}if("checkbox"===a.type){for(var c=t(b,a),d={},e=0;e<c.length;e++)"on"===c[e].value&&c[e].name?d[c[e].name]=c[e].checked:d[c[e].value]=c[e].checked;return d}if("select-one"==a.type)return c=null,0<=a.selectedIndex&&(c=k(a.options[a.selectedIndex],"text"),null===c&&(c=k(a.options[a.selectedIndex],"value"))),c;if("select-multiple"===
a.type){c=[];if(a.options)for(d=0;d<a.options.length;d++)a.options[d].selected&&(e=k(a.options[d],"text"),null===e&&(e=k(a.options[d],"value")),null!==e&&c.push(e));return 0<c.length?c:null}return"file"===a.type||"password"===a.type?null!==k(a,"value")?!0:!1:k(a,"value")},s=function(a,b,c,d){try{var e=a.parentModule.globalObject.getUtilities(),h=a.formElement,g={eventCategory:"Forms"};e.isString(h.id)&&(g.eventCatId=h.id);e.isString(h.name)&&(g.eventCatLabel=h.name);b.id&&(g.eventItemId=b.id);b.type&&
(g.eventItemType=b.type);b.name&&(g.eventItemLabel=b.name);e.isString(c)&&(g.eventAction=c);e.isString(d)&&(g.eventText=d);if(u(b,a.formParams.eventFieldArray,a.formParams.eventFieldArrayInclusive)){var n=v(b,a);n&&(g.variableFieldValue=n)}if(g.eventAction&&"invalid"===g.eventAction&&!g.eventText){var l;a:{if(b.validity&&!b.validity.valid)for(var m in b.validity)if(b.validity[m]){l=m;break a}l=null}l&&(g.eventText=l)}a.formParams.debug&&console.log(JSON.stringify(g));a.parentModule.parentTracker.send("event",
g);a.formParams.autoValidationTracking&&g.eventAction&&"change"===g.eventAction&&b.validity&&!b.validity.valid&&s(a,b,"invalid")}catch(f){}},w=function(a,b){try{var c={eventCategory:"Forms",eventAction:"submit"},d=a.parentModule.globalObject.getUtilities(),e=a.formElement;d.isString(e.id)&&(c.eventCatId=e.id);d.isString(e.name)&&(c.eventCatLabel=e.name);a.lastSubmitEl&&(a.lastSubmitEl.id&&(c.eventItemId=a.lastSubmitEl.id),a.lastSubmitEl.type&&(c.eventItemType=a.lastSubmitEl.type),a.lastSubmitEl.name&&
(c.eventItemLabel=a.lastSubmitEl.name));d.isFunction(a.formParams.submitCallback)&&b&&(c.hitCallback=a.formParams.submitCallback);for(var h=a.formParams.submitFieldArray,g=a.formParams.submitFieldArrayInclusive,d={},n=!1,l=0;l<e.elements.length;l++){var m=e.elements[l];if(u(m,h,g)){var f=v(m,a);null!==f&&(m.name?(d[m.name]=f,n=!0):m.id&&(d[m.id]=f,n=!0))}}n&&(c.variableFormFields=d);a.formParams.debug&&console.log(JSON.stringify(c));!0===a.formParams.submitSendDeferred?a.parentModule.parentTracker.sendDeferred("event",
c):a.parentModule.parentTracker.send("event",c)}catch(k){}};f=function(a){this.moduleName="forms";this.parentTracker=a;this.globalObject=p;this.forms=[]};f.prototype.trackForm=function(a,b){var c=this.globalObject.getUtilities();if(c.isHTMLform(a)&&c.isObject(b)){c.isArray(b.eventArray)||(b.eventArray=[]);c.isArray(b.eventFieldArray)||(b.eventFieldArray=[]);c.isBoolean(b.eventFieldArrayInclusive)||(b.eventFieldArrayInclusive=!0);c.isBoolean(b.autoValidationTracking)||(b.autoValidationTracking=!0);
c.isArray(b.submitFieldArray)||(b.submitFieldArray=[]);c.isBoolean(b.submitFieldArrayInclusive)||(b.submitFieldArrayInclusive=!0);c.isBoolean(b.submitSendDeferred)||(b.submitSendDeferred=!0);c.isBoolean(b.autoSubmitTag)||(b.autoSubmitTag=!0);c.isBoolean(b.submitAllowHidden)||(b.submitAllowHidden=!0);c.isBoolean(b.debug)||(b.debug=!1);b.autoValidationTracking&&b.eventArray.push("invalid");var d=q(this,a);d?d.formParams=b:(d=new x(this,a,b),this.forms.push(d));for(var e=function(){d.lastSubmitEl=this},
h=b.eventArray,g=0;g<a.elements.length;g++){var f=a.elements[g],l=y(f,d);if(r(f))l.submitlistener||(c.addListener(f,"click",e),l.submitlistener=!0);else if("fieldset"!==f.type)for(var m=0;m<h.length;m++){var k=h[m];l[k]||(c.addListener(f,k,z(d,f,k)),l[k]=!0)}}!d.submitListener&&b.autoSubmitTag&&(c.addListener(a,"submit",function(){w(d,!0)}),d.submitListener=!0);c.runCallback(c.getCallBack(arguments),this.parentTracker)}};f.prototype.trackFormSubmit=function(a){this.globalObject.getUtilities().isHTMLform(a)&&
(a=q(this,a),null!==a&&w(a,!1))};f.prototype.trackFieldEvent=function(a,b,c){var d=this.globalObject.getUtilities();a&&d.isHTMLform(a.form)&&(d=q(this,a.form),null!==d&&s(d,a,b,c))};p.moduleMap.forms=f}})(window);
